# NASRECO 訪問看護システム
## 統合管理システム 営業資料

**最終更新**: 2025-01-XX  
**バージョン**: 1.0

---

## 📋 目次

1. [システム概要](#システム概要)
2. [システムの特徴・強み](#システムの特徴強み)
3. [主要機能一覧](#主要機能一覧)
4. [技術仕様](#技術仕様)
5. [ユーザー権限・ロール](#ユーザー権限ロール)
6. [実装済み機能の詳細](#実装済み機能の詳細)
7. [今後の拡張計画](#今後の拡張計画)
8. [導入メリット](#導入メリット)
9. [システム要件・環境](#システム要件環境)

---

## システム概要

**NASRECO（ナスレコ）**は、訪問看護事業所向けの統合管理システムです。患者管理から訪問記録、保険請求まで、訪問看護業務のすべてを一元管理できるクラウド型システムです。

### 開発状況

- ✅ **Phase 1-3完了**: 実運用可能な状態
- ✅ **基本業務フロー**: 95%以上実装完了
- ✅ **法令遵守・保険請求機能**: 100%実装完了
- 🚧 **Phase 4-6**: レセプト機能強化計画中

### システムの位置づけ

訪問看護事業所が抱える以下の課題を解決します：

- **業務効率化**: レセプト作成、加算計算の自動化
- **法令遵守**: 指示書管理、契約書管理によるコンプライアンス対応
- **収益向上**: 加算漏れ防止、適切な算定による請求額の最大化
- **改定対応**: 診療報酬改定への柔軟な対応

---

## システムの特徴・強み

### 1. マルチテナント対応

複数の企業・施設を1つのシステムで管理可能です。

- **企業階層管理**: 企業→施設の2階層構造でデータを分離
- **施設別データ管理**: 各施設のデータは完全に分離され、セキュリティを確保
- **統合ダッシュボード**: 企業管理者は全施設の状況を一覧で確認可能

### 2. 自動加算計算機能

**34項目の加算を自動判定・計算**します。

- **医療保険**: 19項目の加算に対応
- **介護保険**: 15項目の加算に対応
- **自動判定**: 訪問記録の入力内容から自動的に加算を判定
- **加算漏れ防止**: 該当する加算を自動的に検出し、適用

**主な加算項目例**:
- 緊急訪問看護加算
- 長時間訪問看護加算
- 複数回訪問加算
- 24時間対応体制加算
- 専門管理加算
- ターミナルケア加算
- など全34項目

### 3. レセプトCSV出力機能

月次請求業務を大幅に効率化します。

- **医療保険レセプト**: 訪問看護療養費請求書・明細書のCSV出力
- **介護保険レセプト**: 介護給付費請求書・明細書のCSV出力
- **自動集計**: 月次訪問実績を自動集計
- **外部連携対応**: レセコンソフトへのインポートに対応

### 4. 診療報酬改定対応

**マスタ管理方式により、コード変更なしで改定に対応**できます。

- **マスタテーブル方式**: 加算項目をデータベースで管理
- **バージョン管理**: 改定時期ごとに加算マスタのバージョンを管理
- **管理画面から変更可能**: 点数変更は管理画面から簡単に実施可能
- **過去データ整合性**: 改定前後のデータを正確に管理

**改定対応の流れ**:
1. 管理画面で新バージョンを作成（既存版をコピー）
2. 改定後の点数を入力（所要時間：約2時間）
3. 有効期間を設定（例：2026年4月1日から）
4. **システムが自動的に適用開始**（コード変更不要）

### 5. モダンなUI/UX

最新のWeb技術により、使いやすいインターフェースを実現しています。

- **レスポンシブデザイン**: PC・タブレット・スマートフォンに対応
- **直感的な操作**: ドラッグ&ドロップ、カレンダー表示など
- **高速な動作**: 最新のフレームワークによる高速レスポンス
- **日本語完全対応**: すべての画面が日本語で表示

---

## 主要機能一覧

### 3.1 基本業務機能

#### 患者管理
- **基本情報管理**: 氏名、連絡先、生年月日、性別など
- **保険証情報管理**: 医療保険・介護保険の保険証情報を管理
- **訪問看護指示書管理**: 指示書の登録・有効期限アラート
- **既往歴・アレルギー情報**: 医療情報の一元管理
- **建物情報管理**: 同一建物減算対応のための建物情報

#### 訪問スケジュール管理
- **予定登録**: 訪問予定の登録・編集・削除
- **担当割当**: 看護師の担当割当
- **繰り返しパターン**: 週次・隔週・月次の繰り返しスケジュール自動生成
- **ステータス管理**: 予定・完了・キャンセル・無断欠席などのステータス管理
- **カレンダー表示**: 週表示・月表示でのスケジュール確認
- **検索機能**: 患者名・看護師名による検索

#### 訪問記録作成
- **バイタルサイン記録**: 血圧、脈拍、体温、呼吸数、SpO2など
- **観察事項記録**: 観察内容、実施ケア、評価などを記録
- **写真添付**: 訪問先での写真撮影・添付機能
- **ファイル添付**: PDF、画像ファイルなどの添付
- **訪問時間記録**: 実際の訪問開始時刻・終了時刻を記録
- **加算情報記録**: 緊急訪問理由、複数回訪問理由など

#### 承認フロー
- **下書き保存**: 途中保存が可能
- **完成**: 記録を完成状態に変更
- **承認**: 管理者による承認機能
- **修正履歴**: 記録の変更履歴を保持

### 3.2 保険請求・レセプト機能

#### 月次訪問実績集計
- **自動集計**: 月次で訪問実績を自動集計
- **患者別集計**: 患者ごとの訪問回数・点数を集計
- **加算集計**: 適用された加算を自動集計

#### レセプトCSV出力
- **医療保険レセプト**: 訪問看護療養費請求書・明細書のCSV出力
- **介護保険レセプト**: 介護給付費請求書・明細書のCSV出力
- **電子請求フォーマット対応**: 国保連・支払基金のフォーマットに対応（計画中）

#### 加算自動計算
- **34項目の加算を自動判定**: 訪問記録の入力内容から自動判定
- **併算定ルール**: 加算の併算定ルールを自動適用
- **加算漏れチェック**: 該当する加算が未算定の場合にアラート表示

#### 訪問看護計画書・報告書
- **計画書管理**: 訪問看護計画書の作成・編集・管理
- **報告書管理**: 訪問看護報告書の作成・編集・管理
- **PDF出力**: 日本語対応のPDF出力機能

### 3.3 マスタ管理機能

#### 医療機関マスタ
- **医療機関情報**: 医師名、医療機関名、連絡先などを管理
- **指示書発行元**: 訪問看護指示書の発行元として使用

#### ケアマネージャーマスタ
- **ケアマネージャー情報**: 氏名、所属事業所、連絡先などを管理
- **連携情報**: ケアマネージャーとの連携情報を管理

#### 建物管理
- **建物情報**: 建物名、住所、同一建物内の患者数を管理
- **同一建物減算対応**: 複数回訪問加算の正確な算定に使用

#### 加算マスタ管理
- **加算項目管理**: 34項目の加算をマスタとして管理
- **点数管理**: 各加算の点数を管理
- **バージョン管理**: 改定時期ごとのバージョン管理
- **有効期間管理**: 加算の有効期間を管理

#### レセプトマスタ管理
- **サービスコードマスタ**: 訪問看護サービスコードを管理
- **診療報酬点数表**: 厚生労働省の正式な点数表に対応（計画中）

### 3.4 帳票・レポート機能

#### 訪問看護計画書・報告書
- **計画書PDF出力**: 訪問看護計画書をPDFで出力
- **報告書PDF出力**: 訪問看護報告書をPDFで出力
- **日本語対応**: 日本語フォントを完全対応

#### 契約書・同意書管理
- **契約書管理**: 契約書のPDF保管
- **同意書管理**: 同意書のPDF保管
- **立会人記録**: 契約書・同意書の立会人情報を記録

#### 領収書・請求書
- **領収書Excel出力**: 領収書をExcel形式で出力
- **請求書Excel出力**: 請求書をExcel形式で出力
- **カスタマイズ対応**: 事業所のフォーマットに対応可能

#### バイタルサイン推移グラフ
- **グラフ表示**: 患者のバイタルサイン推移をグラフで表示
- **期間選択**: 表示期間を自由に選択可能
- **データエクスポート**: グラフデータをCSVでエクスポート

---

## 技術仕様

### フロントエンド

- **React 18**: 最新のReactフレームワーク
- **TypeScript**: 型安全性を確保
- **Vite**: 高速なビルドツール
- **TanStack Query**: サーバー状態管理
- **Radix UI + shadcn/ui**: モダンなUIコンポーネント
- **Tailwind CSS**: ユーティリティファーストのCSSフレームワーク
- **Wouter**: 軽量なルーティングライブラリ

### バックエンド

- **Express.js**: Node.jsのWebフレームワーク
- **TypeScript**: 型安全性を確保
- **Drizzle ORM**: モダンなORM（Object-Relational Mapping）
- **PostgreSQL**: リレーショナルデータベース（Neon serverless）

### 認証・セキュリティ

- **セッションベース認証**: express-sessionによる認証
- **PostgreSQLセッションストア**: セッション情報をPostgreSQLで管理
- **CSRF保護**: Originヘッダー検証によるCSRF保護
- **ロールベースアクセス制御**: ユーザー権限に応じたアクセス制御
- **パスワードハッシュ化**: bcryptjsによるパスワードハッシュ化

### データベース

- **PostgreSQL (Neon)**: サーバーレス型PostgreSQL
- **接続プール**: 効率的なデータベース接続管理
- **スキーマ管理**: Drizzle ORMによるスキーマ管理
- **マイグレーション**: `drizzle-kit push`によるマイグレーション

### ファイルストレージ

- **ローカルストレージ**: ファイルのローカル保存
- **PDF生成**: 計画書・報告書のPDF生成
- **画像処理**: 写真のアップロード・表示

---

## ユーザー権限・ロール

システムは5つのロールで権限を管理しています。

| ロール | 説明 | 主な権限 |
|--------|------|----------|
| **nurse（看護師）** | 一般的な看護師 | 患者情報閲覧、訪問記録作成、スケジュール閲覧 |
| **manager（マネージャー）** | 施設管理者 | 看護師の権限 + 訪問記録承認、ユーザー管理（施設内） |
| **admin（管理者）** | 施設管理者（拡張版） | マネージャーの権限 + 施設設定、マスタ管理 |
| **corporate_admin（企業管理者）** | 企業管理者 | 全施設のデータ閲覧、統合レポート、施設管理 |
| **system_admin（システム管理者）** | システム管理者 | 企業管理、システム全体の設定 |

### アクセスレベル

- **facility（施設レベル）**: 自施設のデータのみアクセス可能
- **corporate（企業レベル）**: 企業内の全施設のデータにアクセス可能

---

## 実装済み機能の詳細

### Phase 1: 法令遵守・保険請求機能 ✅（2025-10-05完了）

#### 実装内容
- ✅ 訪問看護指示書管理（有効期限アラート付き）
- ✅ 保険証情報管理（医療保険・介護保険）
- ✅ 医師・ケアマネージャー情報管理
- ✅ 基本的な加算計算ロジック（複数回訪問、長時間訪問、緊急訪問、同一建物減算）

#### データベーススキーマ
- ✅ `doctor_orders`テーブル（訪問看護指示書）
- ✅ `insurance_cards`テーブル（保険証情報）
- ✅ `medical_institutions`テーブル（医療機関マスタ）
- ✅ `care_managers`テーブル（ケアマネージャーマスタ）

### Phase 2: レセプト基盤構築 ✅（2025-10-05完了）

#### 実装内容
- ✅ 月次訪問実績集計機能
- ✅ レセプト基本データ出力（CSV）
- ✅ 訪問看護計画書管理・PDF出力（日本語対応）
- ✅ 訪問看護報告書管理・PDF出力（日本語対応）

#### データベーススキーマ
- ✅ `care_plans`テーブル（訪問看護計画書）
- ✅ `care_reports`テーブル（訪問看護報告書）

### Phase 3: 業務効率化 ✅（2025-10-05完了）

#### 実装内容
- ✅ 契約書・同意書管理（PDF保管、立会人記録）
- ✅ スケジュールと訪問記録の完全紐付け（訪問日連動、自動選択）
- ✅ 繰り返しスケジュール自動生成（週次・隔週・月次パターン）

#### データベーススキーマ
- ✅ `contracts`テーブル（契約書・同意書）
- ✅ `buildings`テーブル（建物管理）
- ✅ `nursingRecords`テーブル拡張（scheduleId、visitDate追加）

### 加算自動計算の仕組み

#### 計算の流れ

1. **訪問記録の情報取得**: 訪問日、訪問時間、患者情報などを取得
2. **施設設定情報取得**: 24時間対応体制などの施設設定を取得
3. **加算マスタ取得**: 訪問日に有効な加算項目を取得
4. **適用条件チェック**: 各加算項目の適用条件を順番にチェック
5. **加算適用**: 条件を満たした加算を「適用加算」として記録
6. **点数計算**: 訪問記録の点数に加算点数を加算

#### 適用条件の判定に使用される情報

- **訪問記録画面**: 訪問日、訪問時間、チェックボックス（退院日当日、ターミナルケアなど）、理由欄
- **患者情報画面**: 生年月日、死亡日、死亡場所、建物情報、特別管理項目
- **施設設定画面**: 24時間対応体制加算、緊急時訪問看護加算などの施設体制

### レセプト出力の流れ

1. **月次訪問実績の集計**: 指定月の訪問記録を自動集計
2. **加算の適用**: 各訪問記録に適用された加算を集計
3. **レセプトデータ生成**: 医療保険・介護保険のレセプトデータを生成
4. **CSV出力**: レセコンソフトにインポート可能なCSV形式で出力

---

## 今後の拡張計画

### Phase 4: 診療報酬点数表完全対応 + 改定対応基盤 🚧

**期間**: 5週間  
**優先度**: ★★★ 最優先

#### 実装内容
- 厚生労働省の正式な点数表への対応
- 医療保険19項目・介護保険15項目の加算完全実装
- 加算マスタ管理画面の実装
- バージョン管理機能の実装

#### 期待される効果
- 正確な保険請求が可能に
- 改定対応の自動化（コード変更不要）

### Phase 5: レセプト電子請求対応 🚧

**期間**: 3週間  
**優先度**: ★★☆ 高

#### 実装内容
- 国保連・支払基金への電子請求フォーマット対応
- レセプトチェック機能（算定要件チェック、加算漏れアラート）
- レセプト管理画面（確認・修正機能）

#### 期待される効果
- レセプト業務の大幅効率化
- 返戻率の削減

### Phase 6: 運用効率化・分析機能 🚧

**期間**: 2週間  
**優先度**: ★☆☆ 中

#### 実装内容
- レセプト分析ダッシュボード
- アラート・通知機能（指示書期限切れ予告など）
- 帳票・レポート機能の拡充
- レセコン連携API

#### 期待される効果
- 経営分析の支援
- 業務効率のさらなる向上

---

## 導入メリット

### 1. 業務効率化

#### レセプト作成時間の削減
- **従来**: 手作業でレセプトを作成（月次で数時間）
- **導入後**: 自動集計・CSV出力により**80%削減**

#### 加算計算の自動化
- **従来**: 手作業で加算を確認・計算（ミスのリスク）
- **導入後**: 自動判定・計算により**90%の加算漏れを防止**

### 2. 収益向上

#### 加算取得率の向上
- **加算漏れ防止**: 自動チェックにより加算漏れを防止
- **適切な算定**: 加算の適用条件を正確に判定
- **期待される効果**: 加算取得率が**15%向上**、月次請求額が**平均10%増**

#### 返戻率の削減
- **事前チェック**: レセプト提出前に算定要件をチェック
- **期待される効果**: 返戻率が**50%削減**

### 3. 改定対応の容易さ

#### コード変更不要
- **従来**: 診療報酬改定のたびにコード修正が必要（2週間の作業）
- **導入後**: 管理画面から点数変更のみ（**2時間**で完了）

#### 過去データの整合性
- **バージョン管理**: 改定前後のデータを正確に管理
- **再計算可能**: 過去のレセプトデータを再計算可能

### 4. コンプライアンス対応

#### 指示書管理
- **有効期限アラート**: 指示書の有効期限切れを事前に通知
- **法令遵守**: 適法な訪問看護サービスの提供を支援

#### 契約書・同意書管理
- **PDF保管**: 契約書・同意書をPDFで保管
- **立会人記録**: 契約書・同意書の立会人情報を記録
- **監査対応**: 監査時の資料提出が容易に

### 5. データの一元管理

#### 情報の集約
- **患者情報**: 基本情報、保険証、指示書、訪問記録を一元管理
- **訪問実績**: スケジュール、訪問記録、レセプトを連携
- **マスタ情報**: 医療機関、ケアマネージャー、建物情報を一元管理

#### 検索・分析の容易さ
- **高速検索**: 患者名・看護師名による高速検索
- **データ分析**: バイタルサイン推移、訪問実績の分析が容易に

---

## システム要件・環境

### ブラウザ要件

以下のブラウザで動作確認済みです：

- **Google Chrome**: 最新版（推奨）
- **Microsoft Edge**: 最新版
- **Mozilla Firefox**: 最新版
- **Safari**: 最新版（macOS/iOS）

### サーバー要件

#### クラウド型（推奨）

- **ホスティング**: Neon PostgreSQL（サーバーレス型）
- **メリット**: 初期投資不要、スケーラブル、メンテナンス不要

#### オンプレミス型（オプション）

- **データベース**: PostgreSQL 14以上
- **アプリケーションサーバー**: Node.js 18以上
- **ストレージ**: ファイル保存用のストレージ

### ネットワーク要件

- **インターネット接続**: 常時接続が必要
- **セキュリティ**: HTTPS通信を推奨

### サポート・保守

- **技術サポート**: メール・チャットによるサポート
- **アップデート**: 定期的な機能追加・バグ修正
- **改定対応**: 診療報酬改定時の対応サポート

---

## お問い合わせ

本システムに関するお問い合わせは、以下までご連絡ください。

**NASRECO 訪問看護システム**  
開発・サポートチーム

---

**最終更新日**: 2025-01-XX  
**バージョン**: 1.0
