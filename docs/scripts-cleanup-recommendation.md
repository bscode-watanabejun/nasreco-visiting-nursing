# scriptsãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—æ¨å¥¨

## ğŸ“Š åˆ†æçµæœ

### ç·ãƒ•ã‚¡ã‚¤ãƒ«æ•°: 88ä»¶

## ğŸ—‘ï¸ å‰Šé™¤æ¨å¥¨ãƒ•ã‚¡ã‚¤ãƒ«

### 1. ä¸€æ™‚çš„ãªç¢ºèªãƒ»èª¿æŸ»ç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆ24ä»¶ï¼‰

ã“ã‚Œã‚‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€ã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ¼ãƒ‰ãƒã‚¹ã‚¿å…¥ã‚Œæ›¿ãˆä½œæ¥­ã‚„ãƒ‡ãƒ—ãƒ­ã‚¤å‰ã®ç¢ºèªä½œæ¥­ã§ä½¿ç”¨ã—ãŸä¸€æ™‚çš„ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã™ã€‚ä½œæ¥­ãŒå®Œäº†ã—ã¦ã„ã‚‹ãŸã‚ã€å‰Šé™¤ã—ã¦ã‚‚å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚

#### ç¢ºèªãƒ»èª¿æŸ»ç”¨ï¼ˆcheck-*ç³»ï¼‰
- `check-all-schema-differences.ts` - ã‚¹ã‚­ãƒ¼ãƒå·®åˆ†ç¢ºèªï¼ˆå®Œäº†æ¸ˆã¿ï¼‰
- `check-bonus-history-service-code-id.ts` - service_code_idç¢ºèªï¼ˆå®Œäº†æ¸ˆã¿ï¼‰
- `check-dev-service-codes.ts` - é–‹ç™ºç’°å¢ƒã®ã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ¼ãƒ‰ç¢ºèªï¼ˆå®Œäº†æ¸ˆã¿ï¼‰
- `check-duplicate-bonus-history.ts` - é‡è¤‡ãƒ‡ãƒ¼ã‚¿ç¢ºèªï¼ˆå®Œäº†æ¸ˆã¿ï¼‰
- `check-duplicate-patients-detail.ts` - é‡è¤‡æ‚£è€…è©³ç´°ç¢ºèª
- `check-duplicate-patients.ts` - é‡è¤‡æ‚£è€…ç¢ºèª
- `check-duplicate-service-codes.ts` - é‡è¤‡ã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ¼ãƒ‰ç¢ºèª
- `check-missing-care-service-codes.ts` - ä»‹è­·ä¿é™ºã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ¼ãƒ‰ç¢ºèª
- `check-production-impact.ts` - æœ¬ç•ªç’°å¢ƒã¸ã®å½±éŸ¿ç¢ºèªï¼ˆå®Œäº†æ¸ˆã¿ï¼‰
- `check-production-schema.ts` - æœ¬ç•ªç’°å¢ƒã‚¹ã‚­ãƒ¼ãƒç¢ºèª
- `check-production-service-code-usage.ts` - æœ¬ç•ªç’°å¢ƒã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ¼ãƒ‰ä½¿ç”¨çŠ¶æ³ç¢ºèªï¼ˆå®Œäº†æ¸ˆã¿ï¼‰
- `check-schema-changes.ts` - ã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´ç¢ºèªï¼ˆå®Œäº†æ¸ˆã¿ï¼‰
- `check-schema-diff.ts` - ã‚¹ã‚­ãƒ¼ãƒå·®åˆ†ç¢ºèªï¼ˆå®Œäº†æ¸ˆã¿ï¼‰
- `check-service-code-details.ts` - ã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ¼ãƒ‰è©³ç´°ç¢ºèª
- `check-service-code-points.ts` - ã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ¼ãƒ‰ç‚¹æ•°ç¢ºèª
- `check-terminal-care-service-codes.ts` - ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚±ã‚¢ã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ¼ãƒ‰ç¢ºèª

#### æ¯”è¼ƒç”¨ï¼ˆcompare-*ç³»ï¼‰
- `compare-bonus-service-code-points.ts` - åŠ ç®—ã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ¼ãƒ‰ç‚¹æ•°æ¯”è¼ƒ
- `compare-dev-prod-schema.ts` - é–‹ç™ºãƒ»æœ¬ç•ªç’°å¢ƒã‚¹ã‚­ãƒ¼ãƒæ¯”è¼ƒ
- `compare-schema-accurate.ts` - ã‚¹ã‚­ãƒ¼ãƒæ­£ç¢ºãªæ¯”è¼ƒï¼ˆå®Œäº†æ¸ˆã¿ï¼‰
- `compare-schema-detailed.ts` - ã‚¹ã‚­ãƒ¼ãƒè©³ç´°æ¯”è¼ƒï¼ˆå®Œäº†æ¸ˆã¿ï¼‰
- `compare-schema-diff.ts` - ã‚¹ã‚­ãƒ¼ãƒå·®åˆ†æ¯”è¼ƒï¼ˆå®Œäº†æ¸ˆã¿ï¼‰
- `compare-service-codes-count.ts` - ã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ¼ãƒ‰ä»¶æ•°æ¯”è¼ƒï¼ˆå®Œäº†æ¸ˆã¿ï¼‰

#### åˆ†æç”¨ï¼ˆanalyze-*ç³»ï¼‰
- `analyze-changes-since-deploy.ts` - ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã®å¤‰æ›´åˆ†æï¼ˆå®Œäº†æ¸ˆã¿ï¼‰
- `analyze-duplicate-impact.ts` - é‡è¤‡ãƒ‡ãƒ¼ã‚¿å½±éŸ¿åˆ†æï¼ˆå®Œäº†æ¸ˆã¿ï¼‰

### 2. é‡è¤‡ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ1ä»¶ï¼‰

- `cleanup-duplicate-bonus-history.ts` - `cleanup-duplicate-bonus-history-for-unique-index.ts`ã¨é‡è¤‡

## âœ… ä¿æŒæ¨å¥¨ãƒ•ã‚¡ã‚¤ãƒ«

### ç§»è¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆå®Œäº†æ¸ˆã¿ã ãŒå±¥æ­´ã¨ã—ã¦ä¿æŒï¼‰
- `migrate-service-codes-to-production.ts` - ãƒ•ã‚§ãƒ¼ã‚º1: æ­£ã—ã„ã‚³ãƒ¼ãƒ‰ã®è¿½åŠ 
- `update-service-code-references.ts` - ãƒ•ã‚§ãƒ¼ã‚º2: å‚ç…§ã®æ›´æ–°
- `deactivate-wrong-service-codes.ts` - ãƒ•ã‚§ãƒ¼ã‚º3: èª¤ã£ãŸã‚³ãƒ¼ãƒ‰ã®ç„¡åŠ¹åŒ–
- `verify-migration.ts` - æ¤œè¨¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
- `run-full-migration.ts` - çµ±åˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ
- `add-all-missing-service-codes.ts` - ä¸è¶³ã—ã¦ã„ãŸã‚³ãƒ¼ãƒ‰ã®è¿½åŠ 
- `cleanup-duplicate-bonus-history-for-unique-index.ts` - é‡è¤‡ãƒ‡ãƒ¼ã‚¿è§£æ¶ˆ

### æ¤œè¨¼ãƒ»ç¢ºèªç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆä»Šå¾Œã‚‚ä½¿ç”¨å¯èƒ½ï¼‰
- `comprehensive-data-check.ts` - åŒ…æ‹¬çš„ãªãƒ‡ãƒ¼ã‚¿ãƒã‚§ãƒƒã‚¯
- `check-unique-index-exists.ts` - ãƒ¦ãƒ‹ãƒ¼ã‚¯ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç¢ºèª
- `check-monthly-receipts-impact.ts` - æœˆæ¬¡ãƒ¬ã‚»ãƒ—ãƒˆã¸ã®å½±éŸ¿ç¢ºèª

### ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
- `fix-*`ç³»ã€`import-*`ç³»ã€`delete-*`ç³»ãªã©

### ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
- `seed-*`ç³»ã€`list-*`ç³»ã€`count-*`ç³»ãªã©

## ğŸ“‹ å‰Šé™¤æ¨å¥¨ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§ï¼ˆ25ä»¶ï¼‰

```bash
# ä¸€æ™‚çš„ãªç¢ºèªãƒ»èª¿æŸ»ç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆ24ä»¶ï¼‰
scripts/analyze-changes-since-deploy.ts
scripts/analyze-duplicate-impact.ts
scripts/check-all-schema-differences.ts
scripts/check-bonus-history-service-code-id.ts
scripts/check-dev-service-codes.ts
scripts/check-duplicate-bonus-history.ts
scripts/check-duplicate-patients-detail.ts
scripts/check-duplicate-patients.ts
scripts/check-duplicate-service-codes.ts
scripts/check-missing-care-service-codes.ts
scripts/check-production-impact.ts
scripts/check-production-schema.ts
scripts/check-production-service-code-usage.ts
scripts/check-schema-changes.ts
scripts/check-schema-diff.ts
scripts/check-service-code-details.ts
scripts/check-service-code-points.ts
scripts/check-terminal-care-service-codes.ts
scripts/compare-bonus-service-code-points.ts
scripts/compare-dev-prod-schema.ts
scripts/compare-schema-accurate.ts
scripts/compare-schema-detailed.ts
scripts/compare-schema-diff.ts
scripts/compare-service-codes-count.ts

# é‡è¤‡ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ1ä»¶ï¼‰
scripts/cleanup-duplicate-bonus-history.ts
```

## âš ï¸ æ³¨æ„äº‹é …

1. **å‰Šé™¤å‰ã«ç¢ºèª**: å‰Šé™¤ã™ã‚‹å‰ã«ã€å„ãƒ•ã‚¡ã‚¤ãƒ«ãŒæœ¬å½“ã«ä¸è¦ã‹ç¢ºèªã—ã¦ãã ã•ã„
2. **å±¥æ­´ã¨ã—ã¦ä¿æŒ**: ç§»è¡Œä½œæ¥­ã®å±¥æ­´ã¨ã—ã¦æ®‹ã—ã¦ãŠããŸã„å ´åˆã¯ä¿æŒã—ã¦ãã ã•ã„
3. **Gitç®¡ç†**: å‰Šé™¤ã™ã‚‹å ´åˆã¯ã€Gitã§ç®¡ç†ã•ã‚Œã¦ã„ã‚‹ãŸã‚å±¥æ­´ã¯æ®‹ã‚Šã¾ã™

## ğŸ—‘ï¸ å‰Šé™¤å®Ÿè¡Œæ–¹æ³•

å‰Šé™¤ã‚’å®Ÿè¡Œã™ã‚‹å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ï¼š

```bash
# å‰Šé™¤æ¨å¥¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤
rm scripts/analyze-changes-since-deploy.ts
rm scripts/analyze-duplicate-impact.ts
rm scripts/check-all-schema-differences.ts
rm scripts/check-bonus-history-service-code-id.ts
rm scripts/check-dev-service-codes.ts
rm scripts/check-duplicate-bonus-history.ts
rm scripts/check-duplicate-patients-detail.ts
rm scripts/check-duplicate-patients.ts
rm scripts/check-duplicate-service-codes.ts
rm scripts/check-missing-care-service-codes.ts
rm scripts/check-production-impact.ts
rm scripts/check-production-schema.ts
rm scripts/check-production-service-code-usage.ts
rm scripts/check-schema-changes.ts
rm scripts/check-schema-diff.ts
rm scripts/check-service-code-details.ts
rm scripts/check-service-code-points.ts
rm scripts/check-terminal-care-service-codes.ts
rm scripts/compare-bonus-service-code-points.ts
rm scripts/compare-dev-prod-schema.ts
rm scripts/compare-schema-accurate.ts
rm scripts/compare-schema-detailed.ts
rm scripts/compare-schema-diff.ts
rm scripts/compare-service-codes-count.ts
rm scripts/cleanup-duplicate-bonus-history.ts
```

