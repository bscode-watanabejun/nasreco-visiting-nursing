# 医療保険レセプトCSV出力 実装状況詳細表

## 概要

本ドキュメントは、医療保険レセプトCSV出力機能の実装状況を、レコード単位・カラム単位で詳細に記載したものです。
各フィールドの出力元を画面名・項目名で明示しています。

**作成日**: 2024年
**対象仕様**: 「オンラインによる請求に係る記録条件仕様(訪問看護用)」令和6年6月版

---

## HM: 訪問看護ステーション情報レコード

| 項番 | フィールド名 | 必須 | 実装状況 | 出力元（画面名・項目名） |
|------|------------|------|---------|----------------------|
| 1 | レコード識別情報 | ○ | ✅ 実装済み | 固定値 "HM" |
| 2 | 審査支払機関 | ○ | ✅ 実装済み | **保険証管理画面**「審査支払機関コード」または保険者番号から自動判定 |
| 3 | 都道府県コード | ○ | ✅ 実装済み | **施設管理画面**「都道府県」 |
| 4 | 点数表 | ○ | ✅ 実装済み | 固定値 "6"（訪問看護） |
| 5 | 訪問看護ステーションコード | ○ | ✅ 実装済み | **施設管理画面**「施設コード」 |
| 6 | 訪問看護ステーション名称 | ○ | ✅ 実装済み | **施設管理画面**「施設名」 |
| 7 | 請求年月 | ○ | ✅ 実装済み | **レセプト一覧画面**の対象年月 |
| 8 | 電話番号 | △ | ✅ 実装済み | **施設管理画面**「電話番号」 |

---

## GO: 訪問看護療養費請求書レコード

| 項番 | フィールド名 | 必須 | 実装状況 | 出力元（画面名・項目名） |
|------|------------|------|---------|----------------------|
| 1 | レコード識別情報 | ○ | ✅ 実装済み | 固定値 "GO" |

---

## RE: レセプト共通レコード

| 項番 | フィールド名 | 必須 | 実装状況 | 出力元（画面名・項目名） |
|------|------------|------|---------|----------------------|
| 1 | レコード識別情報 | ○ | ✅ 実装済み | 固定値 "RE" |
| 2 | レセプト番号 | ○ | ✅ 実装済み | 6桁連番（複数レセプト時は連番） |
| 3 | レセプト種別 | ○ | ✅ 実装済み | 患者・保険証・公費情報から自動判定 |
| 4 | 請求年月 | ○ | ✅ 実装済み | **レセプト一覧画面**の対象年月 |
| 5 | 氏名(漢字) | ○ | ✅ 実装済み | **患者管理画面**「姓」+「名」 |
| 6 | 氏名(カナ) | ○ | ✅ 実装済み | **患者管理画面**「カナ氏名」 |
| 7 | 男女区分 | ○ | ✅ 実装済み | **患者管理画面**「性別」 |
| 8 | 生年月日 | ○ | ✅ 実装済み | **患者管理画面**「生年月日」 |
| 9 | 予備 | - | ✅ 実装済み | 空欄 |
| 10 | 予備 | - | ✅ 実装済み | 空欄 |
| 11 | 給付割合 | △ | ✅ 実装済み | **保険証管理画面**「負担割合」から自動計算（国保の場合のみ、100 - 負担割合） |
| 12 | レセプト特記 | - | ✅ 実装済み | 空欄 |
| 13 | 一部負担金区分（別表7） | △ | ✅ 実装済み | **保険証管理画面**「一部負担金区分（別表7）」（70歳以上・低所得者の場合のみ表示、適用区分I/IIを選択） |
| 14 | 訪問看護記録番号等 | - | ✅ 実装済み | 空欄 |
| 15 | 検索番号 | - | ✅ 実装済み | 空欄 |

---

## HO: 保険者レコード

| 項番 | フィールド名 | 必須 | 実装状況 | 出力元（画面名・項目名） |
|------|------------|------|---------|----------------------|
| 1 | レコード識別情報 | ○ | ✅ 実装済み | 固定値 "HO" |
| 2 | 保険者番号 | ○ | ✅ 実装済み | **保険証管理画面**「保険者番号」 |
| 3 | 被保険者証記号 | ○ | ✅ 実装済み | **保険証管理画面**「記号（医療保険のみ）」 |
| 4 | 被保険者証番号 | ○ | ✅ 実装済み | **保険証管理画面**「番号（医療保険のみ）」 |
| 5 | 実日数 | ○ | ✅ 実装済み | **訪問記録画面**の訪問日から自動集計（重複日を除く） |
| 6 | 合計金額 | ○ | ✅ 実装済み | **レセプト詳細画面**の「合計金額」 |
| 7 | 職務上の事由 | - | ✅ 実装済み | 空欄 |
| 8 | 証明書番号 | - | ✅ 実装済み | 空欄 |
| 9 | 一部負担金額 | - | ❌ 未実装 | 空欄（入力画面未実装） |
| 10 | 減免区分 | - | ❌ 未実装 | 空欄（入力画面未実装） |
| 11 | 減額割合 | - | ❌ 未実装 | 空欄（入力画面未実装） |
| 12 | 減額金額 | - | ❌ 未実装 | 空欄（入力画面未実装） |

---

## KO: 公費レコード（公費併用時のみ出力）

| 項番 | フィールド名 | 必須 | 実装状況 | 出力元（画面名・項目名） |
|------|------------|------|---------|----------------------|
| 1 | レコード識別情報 | ○ | ✅ 実装済み | 固定値 "KO" |
| 2 | 負担者番号 | ○ | ✅ 実装済み | **公費情報画面**「負担者番号」 |
| 3 | 受給者番号 | △ | ✅ 実装済み | **公費情報画面**「受給者番号」 |
| 4 | 任意給付区分 | - | ✅ 実装済み | 空欄（国保のみ、通常は空欄） |
| 5 | 実日数 | ○ | ⚠️ 暫定対応 | **訪問記録画面**の訪問日から自動集計（公費IDでフィルタ未実装） |
| 6 | 合計金額 | ○ | ⚠️ 暫定対応 | **訪問記録画面**の点数から自動計算（公費IDでフィルタ未実装） |
| 7 | 一部負担金額 | - | ❌ 未実装 | 空欄（入力画面未実装） |
| 8 | 公費給付対象一部負担金 | - | ❌ 未実装 | 空欄（入力画面未実装） |

---

## SN: 資格確認レコード（保険者分・公費分で複数出力）

| 項番 | フィールド名 | 必須 | 実装状況 | 出力元（画面名・項目名） |
|------|------------|------|---------|----------------------|
| 1 | レコード識別情報 | ○ | ✅ 実装済み | 固定値 "SN" |
| 2 | 負担者種別 | ○ | ✅ 実装済み | 1=保険者、2=第1公費、3=第2公費...（自動判定） |
| 3 | 確認区分 | ○ | ✅ 実装済み | 固定値 "01"（訪問時等） |
| 4 | 保険者番号等（資格確認） | - | ✅ 実装済み | 空欄（一次請求では省略） |
| 5 | 被保険者証記号（資格確認） | - | ✅ 実装済み | 空欄（一次請求では省略） |
| 6 | 被保険者証番号（資格確認） | - | ✅ 実装済み | 空欄（一次請求では省略） |
| 7 | 枝番 | △ | ✅ 実装済み | 保険者のみ "01"、公費は空欄（自動判定） |
| 8 | 受給者番号 | - | ✅ 実装済み | 空欄（一次請求では省略） |
| 9 | 予備 | - | ✅ 実装済み | 空欄 |

---

## JD: 受診日等レコード（保険者分・公費分で複数出力）

| 項番 | フィールド名 | 必須 | 実装状況 | 出力元（画面名・項目名） |
|------|------------|------|---------|----------------------|
| 1 | レコード識別情報 | ○ | ✅ 実装済み | 固定値 "JD" |
| 2 | 負担者種別 | ○ | ✅ 実装済み | 1=保険者、2=第1公費、3=第2公費...（自動判定） |
| 3-33 | 1日～31日の受診情報 | ○ | ✅ 実装済み | **訪問記録画面**「訪問日」から自動集計（1=実日数に計上、空欄=訪問なし） |

---

## MF: 窓口負担額レコード

| 項番 | フィールド名 | 必須 | 実装状況 | 出力元（画面名・項目名） |
|------|------------|------|---------|----------------------|
| 1 | レコード識別情報 | ○ | ✅ 実装済み | 固定値 "MF" |
| 2 | 窓口負担額区分（別表26） | ○ | ⚠️ 暫定対応 | 固定値 "00"（高額療養費制度未対応、入力画面未実装） |
| 3-32 | 予備1-30 | - | ✅ 実装済み | 空欄 |
| 33 | 予備31 | - | ✅ 実装済み | 空欄 |

---

## IH: 医療機関・保険医情報レコード

| 項番 | フィールド名 | 必須 | 実装状況 | 出力元（画面名・項目名） |
|------|------------|------|---------|----------------------|
| 1 | レコード識別情報 | ○ | ✅ 実装済み | 固定値 "IH" |
| 2 | 医療機関都道府県 | ○ | ✅ 実装済み | **医療機関管理画面**「都道府県」 |
| 3 | 医療機関点数表 | ○ | ✅ 実装済み | 固定値 "6"（訪問看護） |
| 4 | 医療機関コード | ○ | ✅ 実装済み | **医療機関管理画面**「医療機関コード」 |
| 5 | 医療機関名称 | ○ | ✅ 実装済み | **医療機関管理画面**「医療機関名」 |
| 6 | 主治医氏名 | ○ | ✅ 実装済み | **医療機関管理画面**「医師名」 |
| 7 | 主治医への直近報告年月日 | - | ❌ 未実装 | 空欄（入力画面未実装） |

---

## HJ: 訪問看護指示レコード

| 項番 | フィールド名 | 必須 | 実装状況 | 出力元（画面名・項目名） |
|------|------------|------|---------|----------------------|
| 1 | レコード識別情報 | ○ | ✅ 実装済み | 固定値 "HJ" |
| 2 | 指示区分 | ○ | ✅ 実装済み | **訪問看護指示書画面**「指示区分」から自動判定（01-06） |
| 3 | 指示期間自 | ○ | ✅ 実装済み | **訪問看護指示書画面**「指示期間開始日」 |
| 4 | 指示期間至 | ○ | ✅ 実装済み | **訪問看護指示書画面**「指示期間終了日」 |

---

## JS: 心身の状態レコード

| 項番 | フィールド名 | 必須 | 実装状況 | 出力元（画面名・項目名） |
|------|------------|------|---------|----------------------|
| 1 | レコード識別情報 | ○ | ✅ 実装済み | 固定値 "JS" |
| 2 | 心身の状態 | ○ | ✅ 実装済み | **訪問記録画面**「観察事項」（最新の訪問記録） |
| 3 | 基準告示第2の1に規定する疾病等の有無 | - | ✅ 実装済み | 空欄（任意項目、入力画面未実装） |
| 4 | 該当する疾病等 | - | ✅ 実装済み | 空欄（任意項目、入力画面未実装） |
| 5 | GAF尺度により判定した値 | - | ✅ 実装済み | 空欄（任意項目、入力画面未実装） |
| 6 | GAF尺度により判定した年月日 | - | ✅ 実装済み | 空欄（任意項目、入力画面未実装） |

---

## SY: 傷病名レコード

| 項番 | フィールド名 | 必須 | 実装状況 | 出力元（画面名・項目名） |
|------|------------|------|---------|----------------------|
| 1 | レコード識別情報 | ○ | ✅ 実装済み | 固定値 "SY" |
| 2 | 傷病名コード | ○ | ✅ 実装済み | **訪問看護指示書画面**「ICD-10コード」（未コード化は "0000999"） |
| 3 | 修飾語コード | - | ✅ 実装済み | 空欄（部位等修飾語コード、入力画面未実装） |
| 4 | 傷病名称 | ○ | ✅ 実装済み | **訪問看護指示書画面**「病名（主たる傷病名）」 |
| 5 | 補足コメント | - | ✅ 実装済み | 空欄（入力画面未実装） |

---

## RJ: 利用者情報レコード

| 項番 | フィールド名 | 必須 | 実装状況 | 出力元（画面名・項目名） |
|------|------------|------|---------|----------------------|
| 1 | レコード識別情報 | ○ | ✅ 実装済み | 固定値 "RJ" |
| 2 | 訪問開始年月日 | ○ | ✅ 実装済み | **訪問記録画面**「訪問日」（最初の訪問記録） |
| 3 | 訪問した場所1コード | ○ | ✅ 実装済み | **訪問記録画面**「訪問場所コード」（最初の訪問記録） |
| 4 | 訪問した場所1文字データ | - | ✅ 実装済み | **訪問記録画面**「訪問場所詳細」（場所コード99の場合のみ入力可能、最大130バイト） |
| 5 | 訪問した場所2訪問場所変更年月日 | - | ✅ 実装済み | **訪問記録画面**から自動検出（同一月内で異なる場所コードが使用された最初の日付） |
| 6 | 訪問した場所2コード | - | ✅ 実装済み | **訪問記録画面**から自動検出（同一月内で異なる場所コードが使用された最初の場所コード） |
| 7 | 訪問した場所2文字データ | - | ✅ 実装済み | **訪問記録画面**「訪問場所詳細」（場所コード99の場合のみ、最大130バイト） |
| 8 | 訪問した場所3訪問場所変更年月日 | - | ✅ 実装済み | **訪問記録画面**から自動検出（同一月内で異なる場所コードが使用された2件目の日付） |
| 9 | 訪問した場所3コード | - | ✅ 実装済み | **訪問記録画面**から自動検出（同一月内で異なる場所コードが使用された2件目の場所コード） |
| 10 | 訪問した場所3文字データ | - | ✅ 実装済み | **訪問記録画面**「訪問場所詳細」（場所コード99の場合のみ、最大130バイト） |
| 11 | 訪問終了年月日 | - | ✅ 実装済み | **訪問記録画面**「今回で訪問終了」チェック時の訪問日 |
| 12 | 訪問終了時刻 | - | ✅ 実装済み | **訪問記録画面**「実際の終了時間」から自動取得（HHMM形式） |
| 13 | 訪問終了状況コード | - | ✅ 実装済み | **訪問記録画面**「訪問終了状況コード」（別表15、01-軽快、02-施設、03-医療機関、04-死亡、99-その他） |
| 14 | 訪問終了状況文字データ | - | ✅ 実装済み | **訪問記録画面**「訪問終了状況詳細」（コード99の場合のみ入力可能、最大20バイト） |
| 15 | 死亡年月日 | - | ✅ 実装済み | **患者管理画面**「死亡日」 |
| 16 | 死亡時刻 | - | ✅ 実装済み | **患者管理画面**「死亡時刻」（HH:MM形式で入力、CSV出力時にHHMM形式に変換） |
| 17 | 死亡場所コード | - | ✅ 実装済み | **患者管理画面**「死亡場所」（別表16の場所コード、死亡日が入力されている場合のみ表示） |
| 18 | 死亡場所文字データ | - | ✅ 実装済み | **患者管理画面**「死亡場所詳細」（死亡場所「99（その他）」を選択した場合のみ入力可能、最大130バイト） |
| 19 | 利用者情報コード | - | ❌ 未実装 | 空欄（入力画面未実装） |
| 20 | 他の訪問看護ステーション1都道府県 | - | ❌ 未実装 | 空欄（他の訪問看護ステーション入力画面未実装） |
| 21 | 他の訪問看護ステーション1点数表 | - | ❌ 未実装 | 空欄（他の訪問看護ステーション入力画面未実装） |
| 22 | 他の訪問看護ステーション1コード | - | ❌ 未実装 | 空欄（他の訪問看護ステーション入力画面未実装） |
| 23 | 他の訪問看護ステーション1所在地 | - | ❌ 未実装 | 空欄（他の訪問看護ステーション入力画面未実装） |
| 24 | 他の訪問看護ステーション1名称 | - | ❌ 未実装 | 空欄（他の訪問看護ステーション入力画面未実装） |
| 25 | 他の訪問看護ステーション2都道府県 | - | ❌ 未実装 | 空欄（他の訪問看護ステーション入力画面未実装） |
| 26 | 他の訪問看護ステーション2点数表 | - | ❌ 未実装 | 空欄（他の訪問看護ステーション入力画面未実装） |
| 27 | 他の訪問看護ステーション2コード | - | ❌ 未実装 | 空欄（他の訪問看護ステーション入力画面未実装） |
| 28 | 他の訪問看護ステーション2所在地 | - | ❌ 未実装 | 空欄（他の訪問看護ステーション入力画面未実装） |
| 29 | 他の訪問看護ステーション2名称 | - | ❌ 未実装 | 空欄（他の訪問看護ステーション入力画面未実装） |

---

## KA: 訪問看護療養費レコード（基本訪問記録）

| 項番 | フィールド名 | 必須 | 実装状況 | 出力元（画面名・項目名） |
|------|------------|------|---------|----------------------|
| 1 | レコード識別情報 | ○ | ✅ 実装済み | 固定値 "KA" |
| 2 | 算定年月日 | ○ | ✅ 実装済み | **訪問記録画面**「訪問日」 |
| 3 | 負担区分（別表22） | ○ | ✅ 実装済み | 患者・保険証・公費情報から自動判定 |
| 4 | 訪問看護療養費コード | ○ | ✅ 実装済み | **訪問記録画面**「サービスコード」 |
| 5 | 数量データ | ○ | ✅ 実装済み | 固定値 "1"（回数） |
| 6 | 金額 | ○ | ✅ 実装済み | **訪問記録画面**「点数」× 10 |
| 7 | 職種等 | ○ | ✅ 実装済み | **訪問記録画面**「職員資格コード」（訪問回数に応じて自動調整） |
| 8 | 同日訪問回数 | △ | ✅ 実装済み | 1回目は省略、2回目="02"、3回目以上="03"（訪問記録から自動判定） |
| 9 | 指示区分 | ○ | ✅ 実装済み | HJレコードと同じ値（訪問看護指示書から取得） |

---

## KA: 訪問看護療養費レコード（加算）

| 項番 | フィールド名 | 必須 | 実装状況 | 出力元（画面名・項目名） |
|------|------------|------|---------|----------------------|
| 1 | レコード識別情報 | ○ | ✅ 実装済み | 固定値 "KA" |
| 2 | 算定年月日 | ○ | ✅ 実装済み | **訪問記録画面**「訪問日」（加算が適用された訪問記録） |
| 3 | 負担区分（別表22） | ○ | ✅ 実装済み | 患者・保険証・公費情報から自動判定 |
| 4 | 訪問看護療養費コード | ○ | ✅ 実装済み | **レセプト詳細画面**「加算のサービスコード選択」で選択したサービスコード |
| 5 | 数量データ | ○ | ✅ 実装済み | 固定値 "1"（回数） |
| 6 | 金額 | ○ | ✅ 実装済み | **レセプト詳細画面**「加算の点数」× 10 |
| 7 | 職種等 | - | ✅ 実装済み | 空欄（加算は省略） |
| 8 | 同日訪問回数 | - | ✅ 実装済み | 空欄（加算は省略） |
| 9 | 指示区分 | - | ✅ 実装済み | 空欄（加算は省略） |

---

## 実装状況サマリー

| レコード | 総フィールド数 | 実装済み | 暫定対応 | 未実装 |
|---------|--------------|---------|---------|--------|
| HM | 8 | 8 | 0 | 0 |
| GO | 1 | 1 | 0 | 0 |
| RE | 15 | 14 | 0 | 1 |
| HO | 12 | 8 | 0 | 4 |
| KO | 8 | 6 | 2 | 2 |
| SN | 9 | 9 | 0 | 0 |
| JD | 33 | 33 | 0 | 0 |
| MF | 33 | 33 | 1 | 0 |
| IH | 7 | 6 | 0 | 1 |
| HJ | 4 | 4 | 0 | 0 |
| JS | 6 | 6 | 0 | 0 |
| SY | 5 | 5 | 0 | 0 |
| RJ | 29 | 17 | 0 | 12 |
| KA（基本） | 9 | 9 | 0 | 0 |
| KA（加算） | 9 | 9 | 0 | 0 |

**合計**: 実装済み 126、暫定対応 3、未実装 21

---

## 主要な未実装・暫定対応項目

### 1. REレコード: 一部負担金区分（別表7）
- **状況**: ✅ 実装済み
- **内容**: 70歳以上の低所得者（適用区分Ⅰ・Ⅱ）の場合のみ記録
- **実装内容**: 
  - 保険証管理画面に「一部負担金区分（別表7）」選択項目を追加（70歳以上・低所得者の場合のみ表示）
  - CSV出力時に年齢・低所得者判定を行い、設定されている場合のみ出力
  - コード'1'=適用区分II、'3'=適用区分I

### 2. HOレコード: 一部負担金額・減免情報
- **状況**: ❌ 未実装
- **内容**: 一部負担金額、減免区分、減額割合、減額金額
- **必要な対応**: 保険証管理画面またはレセプト詳細画面に減免情報入力項目を追加

### 3. KOレコード: 一部負担金額・公費給付対象一部負担金
- **状況**: ❌ 未実装（実日数・合計金額は暫定対応）
- **内容**: 一部負担金額、公費給付対象一部負担金
- **必要な対応**: 
  - 公費情報画面に一部負担金額入力項目を追加
  - 訪問記録に公費IDを紐付けて、公費ごとの実日数・合計金額を正確に計算

### 4. MFレコード: 窓口負担額区分
- **状況**: ⚠️ 暫定対応（固定値 "00"）
- **内容**: 高額療養費制度の適用状況（00=なし、01=あり（多数回該当除く）、02=あり（多数回該当））
- **必要な対応**: レセプト詳細画面に「高額療養費適用状況」入力項目を追加

### 5. IHレコード: 主治医への直近報告年月日
- **状況**: ❌ 未実装
- **内容**: 主治医への直近報告年月日
- **必要な対応**: 医療機関管理画面または訪問看護指示書画面に「直近報告年月日」入力項目を追加

### 6. RJレコード: 詳細項目
- **状況**: ✅ 一部実装済み
- **実装済み項目**:
  - ✅ 訪問した場所1文字データ（場所コード99の場合のみ）
  - ✅ 訪問した場所2・3（変更履歴、自動検出）
  - ✅ 訪問終了情報（年月日、時刻、状況コード、状況文字データ）
  - ✅ 死亡詳細情報（死亡年月日、死亡時刻、死亡場所コード、死亡場所文字データ）
- **未実装項目**:
  - 利用者情報コード
  - 他の訪問看護ステーション情報（2件まで）
- **実装内容**:
  - 訪問記録画面の「レセプト・加算」タブに「訪問場所詳細」入力欄を追加（場所コード99の場合のみ表示）
  - 訪問記録画面の「レセプト・加算」タブに「訪問終了情報」セクションを追加
    - 「今回で訪問終了」チェックボックス
    - 訪問終了時刻は「実際の終了時間」から自動取得
    - 訪問終了状況コード（別表15）を選択
    - 訪問終了状況詳細（コード99の場合のみ入力可能）
  - CSV生成時に訪問場所変更を自動検出（同一月内で異なる場所コードが使用された場合）
  - 患者管理画面の「退院・計画・死亡情報」セクションに死亡詳細情報を追加
    - 死亡時刻（HH:MM形式で入力、CSV出力時にHHMM形式に変換）
    - 死亡場所（別表16の場所コード、死亡日が入力されている場合のみ表示）
    - 死亡場所詳細（死亡場所「99（その他）」を選択した場合のみ入力可能、最大130バイト）
  - 既存の`deathLocation`フィールドを`deathPlaceCode`（別表16）に置き換え
- **必要な対応**: 
  - 利用者情報コードの入力項目を追加
  - 他の訪問看護ステーション管理画面を追加

---

## 備考

- ✅ 実装済み: データソースから値を取得して出力している
- ⚠️ 暫定対応: 固定値や空欄で出力しているが、本来は動的な値が必要
- ❌ 未実装: 空欄で出力されている（入力画面が未実装）

基本的なCSV出力は動作しますが、高額療養費制度や一部負担金の減免、訪問場所変更履歴などの詳細項目は入力画面が未実装のため未対応です。

