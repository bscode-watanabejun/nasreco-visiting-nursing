# 訪問看護レセプト情報欄(B22セル)出力仕様書

## 概要
「情報欄」には次のア～サの表示項目をタイトル行ごとに点線で区切って順に表示する。
各表示項目の表示内容の基となるレコード及び項目の記録がない場合には表示しない。

---

## ア 主たる傷病名

### データソース
- **レコード**: SYレコード(傷病名レコード)
- **参照マスター**: 傷病名マスター、修飾語マスター

### 表示形式
```
<主たる傷病名>
　１　肺癌
　２　右転移性脳腫瘍の疑い
　３　Ａ病名
```

### CSVレコード例
```csv
SY,1629006,,,
SY,1983019,20568002,,
SY,0000999,,Ａ病名,
```

### 表示ロジック

1. **タイトル行**: `<主たる傷病名>` を表示

2. **基本表示**: 
   - 傷病名マスターから「傷病名省略名称」を取得して表示
   - 傷病名コードが `0000999`(未コード化傷病名)の場合は、「傷病名称」フィールドの文字データを表示

3. **修飾語コードの処理**:
   - コードの先頭2桁目が `1～7`: 接頭語
   - コードの先頭2桁目が `8`: 接尾語

#### ① 接頭語が記録された場合
- 修飾語マスターから「修飾語名称」を取得
- 傷病名の**前**に付して表示

**例**:
- CSV: `SY,1983019,2056,,`
- 表示: `右 転移性脳腫瘍`

#### ② 接尾語が記録された場合
- 修飾語マスターから「修飾語名称」を取得
- 傷病名の**後**に付して表示

**例**:
- CSV: `SY,1983019,8002,,`
- 表示: `転移性脳腫瘍 の疑い`

#### ③ 補足コメントが記録された場合
- 記録された文字データを傷病名の**後**に付して表示

**例**:
- CSV: `SY,8833421,,,（健診にて）`
- 表示: `高血圧症（健診にて）`

#### ④ 複数の接頭語、接尾語及び補足コメントが記録された場合
- 表示順序: **接頭語 → 傷病名 → 接尾語 → 補足コメント**
- 記録された順で表示

**例**:
- CSV: `SY,8290015,205610658058,,（経過観察）`
- 表示: `右 前腕 骨折 の後遺症（経過観察）`

---

## イ 心身の状態

### データソース
- **レコード**: JSレコード

### 表示形式
```
<心身の状態>
ストレスを感じやすく幻聴あり。
（基準告示第２の１に規定する疾病等の有無）
　１　別表７
　２　別表８
（該当する疾病等）
　０１　末期の悪性腫瘍
　５８　真皮を越える褥瘡の状態にある者
（ＧＡＦ尺度により判定した値）
　０２　ＧＡＦ尺度９０－８１
（判定した年月日）
　令和　６年　６月　１日
```

### CSVレコード例
```csv
JS,ストレスを感じやすく幻聴あり。,0102,001058,02,20240601
```

### 表示ロジック

1. **条件**: JSレコードの記録がある場合のみ表示
2. **タイトル行**: `<心身の状態>` を表示
3. **心身の状態**: 記録内容をそのまま表示
4. **疾病等の有無**: 
   - `（基準告示第２の１に規定する疾病等の有無）` を表示
   - 別表１３のコードに対応する内容を表示
5. **該当する疾病等**:
   - `（該当する疾病等）` を表示
   - 別表１４のコードに対応する内容を表示
6. **GAF尺度判定値**:
   - `（ＧＡＦ尺度により判定した値）` を表示
   - 別表２８のコードに対応する内容を表示
7. **判定年月日**:
   - `（判定した年月日）` を表示
   - 西暦→和暦変換して表示

---

## ウ 指示期間

### データソース
- **レコード**: HJレコード

### 表示形式
```
<指示期間>
令和　６年　６月　１日　～　令和　６年　６月３０日
<特別指示期間>
令和　６年　６月　１日　～　令和　６年　６月１４日
令和　６年　６月２０日　～　令和　６年　６月３０日
```

### CSVレコード例
```csv
HJ,01,20240601,20240630
HJ,02,20240601,20240614
HJ,02,20240620,20240630
```

### 表示ロジック

1. **条件**: HJレコードの記録がある場合のみ表示
2. **タイトル行**: 指示区分コードに応じて以下を表示
   - `01` → `<指示期間>`
   - `02` → `<特別指示期間>`
   - `03` → `<精神指示期間>`
   - `04` → `<精神特別指示期間>`
   - `05` → `<医療観察精神指示期間>`
   - `06` → `<医療観察精神特別指示期間>`
3. **期間表示**: 
   - 西暦→和暦変換
   - 形式: `令和　○年　○月　○日　～　令和　○年　○月　○日`
4. **複数レコード**: 同一指示区分のHJレコードが複数ある場合、同一タイトル行の下に連続して表示

---

## エ 訪問開始年月日・訪問終了年月日・訪問終了時刻・訪問終了の状況

### データソース
- **レコード**: RJレコード

### 表示形式
```
<訪問開始年月日>
令和　６年　６月　１０日
<訪問終了年月日>
令和　６年　６月　３０日
<訪問終了時刻>
１５時　５分
<訪問終了の状況>
５　その他；○○のため
```

### CSVレコード例
```csv
RJ,20240610,01,,,,,,,,20240630,1505,99,○○のため,,,,,,,,,,,,,,,
```

### 表示ロジック

1. **訪問開始年月日**: 
   - タイトル行: `<訪問開始年月日>`
   - 西暦→和暦変換して表示

2. **訪問終了年月日**: 
   - 条件: 記録がある場合のみ
   - タイトル行: `<訪問終了年月日>`
   - 西暦→和暦変換して表示

3. **訪問終了時刻**: 
   - 条件: 記録がある場合のみ
   - タイトル行: `<訪問終了時刻>`
   - 形式変換: `hhmm` → `hh時　mm分`

4. **訪問終了の状況**: 
   - 条件: 記録がある場合のみ
   - タイトル行: `<訪問終了の状況>`
   - 別表１５のコードに対応する内容を表示
   - コード `99`(その他)の場合: セミコロン(`;`)に続けて文字データを表示

---

## オ 死亡年月日・死亡時刻・死亡した場所

### データソース
- **レコード**: RJレコード

### 表示形式
```
<死亡年月日>
令和　６年　６月　３０日
<死亡時刻>
１５時　５分
<死亡した場所>
５　その他；○○○
```

### CSVレコード例
```csv
RJ,20240610,01,,,,,,,,20240630,1505,04,,20240630,1505,99,○○○,,,,,,,,,,,
```

### 表示ロジック

1. **死亡年月日**: 
   - 条件: 記録がある場合のみ
   - タイトル行: `<死亡年月日>`
   - 西暦→和暦変換して表示

2. **死亡時刻**: 
   - 条件: 記録がある場合のみ
   - タイトル行: `<死亡時刻>`
   - 形式変換: `hhmm` → `hh時　mm分`

3. **死亡した場所**: 
   - 条件: 記録がある場合のみ
   - タイトル行: `<死亡した場所>`
   - 別表１６(場所コード)に対応する内容を表示
   - コード `99`(その他)の場合: セミコロン(`;`)に続けて文字データを表示

---

## カ 情報提供先

### データソース
- **レコード**: TJレコード

### 表示形式
```
<情報提供先　１市（区）町村等>
（２　指定特定相談支援事業者等）
<情報提供先　２学校等>
（２　転園・転学）
　前回算定年月；令和　５年　４月
　前回算定年月；令和　６年　４月
```

### CSVレコード例
```csv
TJ,02,,,
TJ,10,,202304,
TJ,12,,202404,
```

### 表示ロジック

1. **条件**: TJレコードの記録がある場合のみ表示
2. **タイトル行**: コードに応じて以下を表示
   - `01` or `02` → `<情報提供先　１市（区）町村等>`
   - `10`, `11`, `12`, `13` → `<情報提供先　２学校等>`
   - `21`, `22`, `23` → `<情報提供先　３保険医療機関等>`
3. **複数レコード**: タイトル行が同一の場合、先頭にのみタイトル行を表示
4. **内容表示**: 別表１８(情報提供先コード)の括弧書き部分を表示
   - ただし、コード `10`(２ 学校等(年度内で１回目の算定))の場合は表示しない
5. **前回算定年月**: 記録がある場合、西暦→和暦変換して表示

---

## キ 特記事項

### データソース
- **レコード**: TZレコード
- **参照マスター**: 別表２１(特記事項コード)、コメントマスター

### 表示形式
```
<特記事項>
５　介
８　退支；再入院年月日（退院支援指導加算）；令和６年６月２０日
```

### CSVレコード例
```csv
TZ,05,,
TZ,08,850500011,５０６０６２０
```

### 表示ロジック

1. **条件**: TZレコードの記録がある場合のみ表示
2. **タイトル行**: `<特記事項>` を表示
3. **特記事項コード**: 別表２１に対応する内容を表示
4. **コメントコード**: 
   - 記録がある場合、コメントマスターから「コメント文」と「文字データ」を取得
   - コメントパターンごとに定められたレセプト編集方法により表示
   - ※詳細は「第15章の３ コメントレコード及び特記事項レコード記録例」を参照

---

## ク 専門の研修

### データソース
- **レコード**: KSレコード
- **参照マスター**: 別表２７(専門の研修コード)

### 表示形式
```
<専門の研修>
２　専門管理加算（４　特定行為（０１　気管カニューレの交換））
手順書交付年月日；令和６年６月１０日
直近見直し年月日；令和６年６月２０日
```

### CSVレコード例
```csv
KS,21,,20240610,20240620
```

### 表示ロジック

1. **条件**: KSレコードの記録がある場合のみ表示
2. **タイトル行**: `<専門の研修>` を表示
3. **専門の研修コード**: 別表２７に対応する内容を表示
4. **手順書交付年月日**: 
   - 記録がある場合、`手順書交付年月日；` に続けて西暦→和暦変換した日付を表示
5. **直近見直し年月日**: 
   - 記録がある場合、`直近見直し年月日；` に続けて西暦→和暦変換した日付を表示

---

## ケ 他の訪問看護ステーション１・２

### データソース
- **レコード**: RJレコード

### 表示形式
```
<他の訪問看護ステーション１>
所在地；東京都▲▲
名称；△△ステーション
<他の訪問看護ステーション２>
所在地；東京都●●
名称；訪問看護ステーション○○
```

### CSVレコード例
```csv
RJ,20240610,01,,,,,,,,,,,,,,,,02,13,6,1111111,東京都▲▲,△△ステーション,13,6,2222222,東京都●●,訪問看護ステーション○○
```

### 表示ロジック

1. **他の訪問看護ステーション１**: 
   - 条件: 記録がある場合のみ
   - タイトル行: `<他の訪問看護ステーション１>`
   - `所在地；` に続けて所在地を表示
   - `名称；` に続けて名称を表示

2. **他の訪問看護ステーション２**: 
   - 条件: 記録がある場合のみ
   - タイトル行: `<他の訪問看護ステーション２>`
   - 表示方法は「他の訪問看護ステーション１」と同様

---

## コ 訪問した場所２・３

### データソース
- **レコード**: RJレコード
- **参照マスター**: 別表１６(場所コード)

### 表示形式
```
<訪問した場所２>
訪問場所変更年月日；令和　６年　６月１０日
１　自宅
<訪問した場所３>
訪問場所変更年月日；令和　６年　６月２０日
５　その他；○○○
```

### CSVレコード例
```csv
RJ,20240601,02,,20240610,01,,20240620,99,○○○,,,,,,,,,,,,,,,,,,,
```

### 表示ロジック

1. **訪問した場所２**: 
   - 条件: 記録がある場合のみ
   - タイトル行: `<訪問した場所２>`
   - `訪問場所変更年月日；` に続けて西暦→和暦変換した日付を表示
   - 別表１６(場所コード)に対応する内容を表示
   - コード `99`(その他)の場合: セミコロン(`;`)に続けて文字データを表示

2. **訪問した場所３**: 
   - 条件: 記録がある場合のみ
   - タイトル行: `<訪問した場所３>`
   - 表示方法は「訪問した場所２」と同様

---

## サ その他

### データソース
- **レコード**: COレコード
- **参照マスター**: コメントマスター

### 表示形式
```
特別訪問看護指示書の連続した交付
入院又は入所前の最後に指定訪問看護を行った年月日；令和６年５月３０日
```

### CSVレコード例
```csv
CO,820500001,,
CO,850500017,５０６０５３０,
```

### 表示ロジック

1. **条件**: COレコードの記録がある場合のみ表示
2. **表示内容**: 
   - コメントマスターから「コメント文」と「文字データ」を取得
   - コメントパターンごとに定められたレセプト編集方法により表示
   - ※詳細は「第15章の３ コメントレコード及び特記事項レコード記録例」を参照

---

## 実装時の注意事項

### 共通ルール
1. **各表示項目の条件**: 基となるレコード及び項目の記録がない場合は表示しない
2. **区切り**: タイトル行ごとに点線で区切る
3. **表示順序**: ア→イ→ウ→エ→オ→カ→キ→ク→ケ→コ→サの順

### 日付・時刻の変換
- **西暦→和暦**: `20240601` → `令和　６年　６月　１日`
- **時刻形式**: `hhmm` → `hh時　mm分` (例: `1505` → `１５時　５分`)

### 全角・半角
- 数字: 全角で表示
- 記号: 全角スペース、全角セミコロン等を使用

### マスターデータ参照
- 別表１３: 基準告示第２の１に規定する疾病等の有無コード
- 別表１４: 疾病等コード
- 別表１５: 訪問終了の状況コード
- 別表１６: 場所コード
- 別表１８: 情報提供先コード
- 別表２１: 特記事項コード
- 別表２７: 専門の研修コード
- 別表２８: GAF尺度により判定した値コード
- 傷病名マスター
- 修飾語マスター
- コメントマスター
