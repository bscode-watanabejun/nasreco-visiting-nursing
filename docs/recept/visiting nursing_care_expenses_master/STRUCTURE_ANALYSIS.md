# 訪問看護療養費マスターファイル構造分析

## 概要

訪問看護療養費マスターは、基本テーブルと訪問看護療養費の算定要件等を設定した5つのテーブルで構成されています。

## ファイル一覧

1. **基本テーブル** (`訪問看護療養費マスター_基本テーブル.csv`)
   - 208件のレコード
   - 73列（項番1-72に対応）

2. **基本・基本加算対応テーブル** (`訪問看護療養費マスター_基本・基本加算対応テーブル.csv`)
   - 9列

3. **併算定背反テーブル** (`訪問看護療養費マスター_併算定背反テーブルcsv.csv`)
   - 4,340件のレコード
   - 14列

4. **施設基準テーブル** (`訪問看護療養費マスター_施設基準テーブル.csv`)
   - 105件のレコード
   - 10列

5. **算定回数限度テーブル** (`訪問看護療養費マスター_算定回数限度テーブル.csv`)
   - 266件のレコード
   - 11列

## 基本テーブルの列構造（重要項目）

PDF仕様説明書に基づく列の意味：

| 列番号 | 項番 | 項目名 | 形式 | 内容 | 備考 |
|--------|------|--------|------|------|------|
| [0] | 1 | 変更区分 | 数字1桁 | マスター内容の異動状況 | 0:同じ、1:抹消、3:新規、5:変更、9:廃止 |
| [1] | 2 | マスター種別 | 英数1桁 | 「R」固定 | 訪問看護療養費マスターであることを表す |
| [2] | 3 | 訪問看護療養費コード | 数字9桁 | **サービスコード** | **510000110** など（先頭5が医療保険） |
| [3] | 4 | 区分番号 | 数字2桁 | 区分番号 | 01など |
| [4] | 5 | 枝番 | 数字1桁 | 区分番号の枝番 | 0など |
| [5] | 6 | 項番 | 数字2桁 | 項番 | 01など |
| [6] | 7 | 基本名称 | 漢字200 | **サービス名称** | 「訪問看護基本療養費１（保健師、助産師又は看護師による場合（ハを除く。））（週３日目まで）」など |
| [7] | 8 | 省略名称有効桁数 | 数字2桁 | 省略名称の文字数 | 44など |
| [8] | 9 | 省略名称 | 漢字128 | 出力用省略名称 | 基本名称と同じ内容 |
| [9] | 10 | 省略カナ名称有効桁数 | 数字2桁 | カナ名称の文字数 | 18など |
| [10] | 11 | 省略カナ名称 | 英数カナ20 | カナ名称 | 「ﾎｳﾓﾝｶﾝｺﾞｷﾎﾝﾘｮｳﾖｳﾋ1」など |
| [15] | 16 | 新又は現金額 | 数字10 | **点数** | **5550.00** など（整数部7桁、小数点1桁、小数部2桁） |
| [28-42] | 29-43 | 職種区分①～⑮ | 数字30 | 職種等コード | 01, 02, 03, 08など（保健師、助産師、看護師、専門研修修了看護師など） |
| [70] | 71 | 変更年月日 | 数字8 | **有効期間開始日** | **20240601** など（YYYYMMDD形式） |
| [71] | 72 | 廃止年月日 | 数字8 | **有効期間終了日** | **99999999** など（99999999は無期限） |

## 現在のシードデータとの違い

### サービスコードの不一致

**現在のシードデータ（誤り）:**
- `311000110` - 訪問看護基本療養費（Ⅰ）週3日まで
- `311000210` - 訪問看護基本療養費（Ⅰ）週4日以降

**CSVファイルの正しいコード:**
- `510000110` - 訪問看護基本療養費１（保健師、助産師又は看護師による場合（ハを除く。））（週３日目まで）
- `510000210` - 訪問看護基本療養費１（保健師、助産師又は看護師による場合（ハを除く。））（週４日目以降）

### サービスコードの構造

- **9桁の数字**
- **先頭1桁**: 訪問看護療養費コードを表す「5」を設定
- **残り8桁**: 訪問看護療養費ごとに重複しない番号

### 保険種別の判定

サービスコードの先頭2桁で判定：
- `51xxxxxxx`, `53xxxxxxx` = 医療保険
- `52xxxxxxx` = 介護保険（推測）

## CSVファイルの読み取り方法

1. **エンコーディング**: Shift-JIS
2. **区切り文字**: カンマ（`,`）
3. **引用符**: ダブルクォート（`"`）で囲まれた値

## 次のステップ

1. CSVファイルから正しいサービスコードを抽出
2. 現在のシードデータを正しいデータに置き換え
3. データベーススキーマとの整合性を確認
4. シードスクリプトを更新

