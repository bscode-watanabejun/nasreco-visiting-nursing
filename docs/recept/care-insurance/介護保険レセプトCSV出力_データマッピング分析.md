# 介護保険レセプトCSV出力 データマッピング分析

## 概要
現在保持しているデータベースのデータで、介護保険レセプトCSV出力仕様書の各項目が出力可能かどうかを分析したドキュメントです。

## 分析対象レコード

1. コントロールレコード（種別:1）
2. 7111（介護給付費請求書情報）
3. 7131基本情報レコード（01）
4. 7131明細情報レコード（02）
5. 7131集計情報レコード（10）
6. エンドレコード（種別:3）

---

## 1. コントロールレコード（種別:1）

| 項番 | 項目名 | 必須 | データソース | 出力可否 | 備考 |
|------|--------|------|------------|---------|------|
| 1 | レコード種別 | ○ | 固定値「1」 | ✅ 可能 | - |
| 2 | レコード番号 | ○ | 計算値（連番） | ✅ 可能 | - |
| 3 | ボリューム通番 | ○ | 固定値「0」 | ✅ 可能 | - |
| 4 | レコード件数 | ○ | 計算値（データレコード総数） | ✅ 可能 | - |
| 5 | データ種別 | ○ | 固定値「711」 | ✅ 可能 | - |
| 6 | 福祉事務所特定番号 | ○ | 固定値「0」 | ✅ 可能 | - |
| 7 | 保険者番号 | ○ | 固定値「0」 | ✅ 可能 | - |
| 8 | 事業所番号 | ○ | 施設管理画面「指定事業所番号（介護保険）」 | ✅ 実装済み | 10桁の指定事業所番号。「指定事業所番号（介護保険）」を優先使用、未設定時は「施設コード」から生成（後方互換性） |
| 9 | 都道府県番号 | ○ | 施設管理画面「都道府県」 | ✅ 可能 | 2桁の都道府県コード |
| 10 | 媒体区分 | ○ | 固定値「4」（FDまたはCD-R） | ✅ 可能 | - |
| 11 | 処理対象年月 | ○ | リクエストパラメータ | ✅ 可能 | - |
| 12 | ファイル管理番号 | ○ | 固定値「0」または「1」 | ✅ 可能 | - |
| 13 | ブランク | ○ | 改行（CR+LF） | ✅ 可能 | - |

**必須項目の出力可否**: ✅ すべて可能

---

## 2. 7111（介護給付費請求書情報）

| 項番 | 項目名 | 必須 | データソース | 出力可否 | 備考 |
|------|--------|------|------------|---------|------|
| 1 | 交換情報識別番号 | ○ | 固定値「7111」 | ✅ 可能 | - |
| 2 | サービス提供年月 | ○ | リクエストパラメータ | ✅ 可能 | - |
| 3 | 事業所番号 | ○ | 施設管理画面「指定事業所番号（介護保険）」 | ✅ 実装済み | 10桁の指定事業所番号。「指定事業所番号（介護保険）」を優先使用、未設定時は「施設コード」から生成（後方互換性） |
| 4 | 保険・公費等区分コード | ○ | 判定ロジック | ✅ 可能 | 公費情報の有無で判定 |
| 5 | 法別番号 | ○ | 公費情報から取得 | ✅ 実装済み | 公費負担医療情報の「法別番号」。**実装済み**: 法別番号ごとに複数の7111レコードを出力するように実装済み。患者を法別番号ごとにグループ化し（公費がない場合は法別番号「0」）、各法別番号ごとに7111レコードを生成している |
| 6 | 請求情報区分コード | ○ | 判定ロジック | ✅ 可能 | 保険請求:0、公費請求:12 |
| 7 | サービス費用_件数 | ○ | 月次レセプトから集計 | ✅ 可能 | 介護保険のレセプト件数 |
| 8 | サービス費用_単位数 | ○ | 月次レセプト「総単位数」から集計 | ✅ 可能 | - |
| 9 | サービス費用_費用合計 | ○ | 月次レセプト「総金額」から集計 | ✅ 可能 | - |
| 10 | サービス費用_保険請求額 | ○ | 計算値 | ✅ 可能 | 費用合計 × 給付率 |
| 11 | サービス費用_公費請求額 | ○ | 計算値 | ✅ 可能 | 公費情報から計算 |
| 12 | サービス費用_利用者負担 | ○ | 計算値 | ✅ 可能 | 費用合計 - 保険請求額 - 公費請求額 |
| 13-18 | 特定入所者介護サービス費等 | - | 固定値「0」または空欄 | ✅ 可能 | 訪問看護では不要 |

**必須項目の出力可否**: ✅ すべて可能

---

## 3. 7131基本情報レコード（01）- 全56項目

### 基本情報（項番1-6）

| 項番 | 項目名 | 必須 | データソース | 出力可否 | 備考 |
|------|--------|------|------------|---------|------|
| 1 | 交換情報識別番号 | ○ | 要介護状態区分から自動判定 | ✅ 実装済み | 要介護1〜5→「7131」、要支援1・2→「7132」。介護度未設定時はデフォルト「7131」 |
| 2 | レコード種別コード | ○ | 固定値「01」 | ✅ 可能 | - |
| 3 | サービス提供年月 | ○ | リクエストパラメータ | ✅ 可能 | - |
| 4 | 事業所番号 | ○ | 施設管理画面「指定事業所番号（介護保険）」 | ✅ 実装済み | 10桁の指定事業所番号。「指定事業所番号（介護保険）」を優先使用、未設定時は「施設コード」から生成（後方互換性） |
| 5 | 証記載保険者番号 | ○ | 保険証情報「保険者番号」 | ✅ 可能 | 8桁。データ取得時に8桁にパディングする処理を実装済み |
| 6 | 被保険者番号 | ○ | 保険証情報「被保険者番号」 | ✅ 可能 | 10桁。データ取得時に10桁にパディングする処理を実装済み |

### 公費情報（項番7-12）

| 項番 | 項目名 | 必須 | データソース | 出力可否 | 備考 |
|------|--------|------|------------|---------|------|
| 7 | 公費1 負担者番号 | - | 公費負担医療情報「負担者番号」（優先順位1） | ✅ 可能 | 8桁 |
| 8 | 公費1 受給者番号 | - | 公費負担医療情報「受給者番号」（優先順位1） | ✅ 可能 | 7桁。登録している受給者番号をそのまま出力 |
| 9 | 公費2 負担者番号 | - | 公費負担医療情報「負担者番号」（優先順位2） | ✅ 可能 | 8桁 |
| 10 | 公費2 受給者番号 | - | 公費負担医療情報「受給者番号」（優先順位2） | ✅ 可能 | 7桁。登録している受給者番号をそのまま出力 |
| 11 | 公費3 負担者番号 | - | 公費負担医療情報「負担者番号」（優先順位3） | ✅ 可能 | 8桁 |
| 12 | 公費3 受給者番号 | - | 公費負担医療情報「受給者番号」（優先順位3） | ✅ 可能 | 7桁。登録している受給者番号をそのまま出力 |

### 被保険者情報（項番13-18）

| 項番 | 項目名 | 必須 | データソース | 出力可否 | 備考 |
|------|--------|------|------------|---------|------|
| 13 | 生年月日 | ○ | 利用者情報「生年月日」 | ✅ 可能 | YYYYMMDD形式に変換 |
| 14 | 性別コード | ○ | 利用者情報「性別」 | ✅ 可能 | male→1, female→2 に変換 |
| 15 | 要介護状態区分コード | ○ | 利用者情報「要介護状態区分」 | ✅ 可能 | support1→11, support2→12, care1→21, care2→22, care3→23, care4→24, care5→25 |
| 16 | 旧措置入所者特例コード | ○ | 固定値「1」 | ✅ 可能 | 入力画面に該当項目なし。固定値「1」（無し）を設定済み |
| 17 | 認定有効期間 開始年月日 | ○ | 保険証情報「有効期間開始日」 | ✅ 可能 | 保険証情報の有効期間開始日を出力 |
| 18 | 認定有効期間 終了年月日 | ○ | 保険証情報「有効期間終了日」 | ✅ 可能 | 保険証情報の有効期限を出力 |

### 居宅サービス計画情報（項番19-20）

| 項番 | 項目名 | 必須 | データソース | 出力可否 | 備考 |
|------|--------|------|------------|---------|------|
| 19 | 居宅サービス計画作成区分コード | ○ | 居宅サービス計画作成画面「居宅サービス計画作成区分」 | ✅ 実装済み | 居宅サービス計画作成画面で選択可能（1=居宅介護支援事業所作成、2=自己作成、3=介護予防支援事業所・地域包括支援センター作成）。未設定の場合はデフォルト値「2」（自己作成）を使用。作成区分が「1」または「3」で事業所番号が未入力の場合は自動的に「2」に変更する処理を実装 |
| 20 | 居宅介護支援事業所番号 | 条件付き | 居宅サービス計画作成画面「居宅介護支援事業所番号」 | ✅ 実装済み | 居宅サービス計画作成画面で入力可能（10桁英数字）。作成区分が「1」（居宅介護支援事業所作成）または「3」（介護予防支援事業所・地域包括支援センター作成）のときは必須、「2」（自己作成）のときは空欄。CSV出力時に作成区分に応じたバリデーションを実施し、未入力の場合はエラーメッセージを表示 |

### サービス期間情報（項番21-28）

| 項番 | 項目名 | 必須 | データソース | 出力可否 | 備考 |
|------|--------|------|------------|---------|------|
| 21 | 開始年月日 | ○ | 居宅サービス計画「計画期間開始日」または訪問記録の最初の日付 | ✅ 可能 | 居宅サービス計画の「計画期間開始日」を優先し、なければ訪問記録の最初の日付を使用 |
| 22 | 中止年月日 | - | 訪問記録の最終日付または利用者の利用状態 | ⚠️ 要確認 | サービス中止日を特定するロジックが必要 |
| 23 | 中止理由・入所(院)前の状況コード | - | ❌ データなし | ❌ **不可** | 入力画面に該当項目なし |
| 24 | 入所(院)年月日 | - | 利用者情報から判定 | ⚠️ 要確認 | 訪問看護では通常不要だが、短期入所時の日付が必要 |
| 25 | 退所(院)年月日 | - | 訪問記録から判定 | ⚠️ 要確認 | 訪問看護では通常不要 |
| 26 | 入所(院)実日数 | - | 計算値 | ⚠️ 要確認 | 訪問看護では通常0 |
| 27 | 外泊日数 | - | ❌ データなし | ❌ **不可** | 訪問看護では不要 |
| 28 | 退所(院)後の状態コード | - | ❌ データなし | ❌ **不可** | 訪問看護では不要 |

### 給付率情報（項番29-32）

| 項番 | 項目名 | 必須 | データソース | 出力可否 | 備考 |
|------|--------|------|------------|---------|------|
| 29 | 保険給付率 | ○ | 保険証情報「自己負担割合」から計算 | ✅ 可能 | 1割負担→90, 2割負担→80, 3割負担→70 |
| 30 | 公費1給付率 | - | 公費負担医療情報「給付率」（優先順位1） | ✅ 実装済み | 公費カード登録画面で給付率を入力可能（任意入力、0-100）。未入力の場合は「0」を出力。3桁でパディングして出力 |
| 31 | 公費2給付率 | - | 公費負担医療情報「給付率」（優先順位2） | ✅ 実装済み | 公費カード登録画面で給付率を入力可能（任意入力、0-100）。未入力の場合は「0」を出力。3桁でパディングして出力 |
| 32 | 公費3給付率 | - | 公費負担医療情報「給付率」（優先順位3） | ✅ 実装済み | 公費カード登録画面で給付率を入力可能（任意入力、0-100）。未入力の場合は「0」を出力。3桁でパディングして出力 |

### 合計情報（項番33-56）

| 項番 | 項目名 | 必須 | データソース | 出力可否 | 備考 |
|------|--------|------|------------|---------|------|
| 33 | 合計情報 サービス単位数 | ○ | 月次レセプト「総単位数」 | ✅ 可能 | - |
| 34 | 合計情報 請求額 | ○ | 月次レセプト「総金額」から計算 | ✅ 可能 | 保険請求額 |
| 35 | 合計情報 利用者負担額 | ○ | 計算値 | ✅ 可能 | 費用合計 - 保険請求額 |
| 36-38 | 保険 緊急時施設療養費等 | - | 固定値「0」 | ✅ 可能 | 訪問看護では不要 |
| 39-56 | 公費1-3の各種合計 | - | 公費情報から計算 | ⚠️ 要確認 | 公費が存在する場合のみ計算 |

**必須項目の出力可否**: 
- ✅ 出力可能: 約41項目
- ✅ 実装済み: 中止理由コードは空欄を出力（データなしだが仕様上は任意項目）

---

## 4. 7131明細情報レコード（02）- 全18項目

| 項番 | 項目名 | 必須 | データソース | 出力可否 | 備考 |
|------|--------|------|------------|---------|------|
| 1 | 交換情報識別番号 | ○ | 要介護状態区分から自動判定 | ✅ 実装済み | 要介護1〜5→「7131」、要支援1・2→「7132」。介護度未設定時はデフォルト「7131」 |
| 2 | レコード種別コード | ○ | 固定値「02」 | ✅ 可能 | - |
| 3 | サービス提供年月 | ○ | リクエストパラメータ | ✅ 可能 | - |
| 4 | 事業所番号 | ○ | 施設管理画面「指定事業所番号（介護保険）」 | ✅ 実装済み | 10桁の指定事業所番号。「指定事業所番号（介護保険）」を優先使用、未設定時は「施設コード」から生成（後方互換性） |
| 5 | 証記載保険者番号 | ○ | 保険証情報「保険者番号」 | ✅ 可能 | 8桁。データ取得時に8桁にパディングする処理を実装済み |
| 6 | 被保険者番号 | ○ | 保険証情報「被保険者番号」 | ✅ 可能 | 10桁。データ取得時に10桁にパディングする処理を実装済み |
| 7 | サービス種類コード | ○ | 訪問記録「サービスコード」から抽出（先頭2桁） | ✅ 実装済み | 13=訪問看護, 16=介護予防訪問看護。6桁または9桁のサービスコードから先頭2桁を抽出 |
| 8 | サービス項目コード | ○ | 訪問記録「サービスコード」から抽出（後4桁） | ✅ 実装済み | 6桁のサービスコードから2桁目以降4桁を抽出。9桁の場合は2桁目以降4桁を使用 |
| 9 | 単位数 | ○ | サービスコードマスタ「単位数」 | ✅ 実装済み | サービスコードマスタから取得 |
| 10 | 日数・回数 | ○ | 訪問記録の回数を集計 | ✅ 実装済み | 同一サービス項目コードの訪問回数を集計。訪問記録と加算の両方を出力 |
| 11-13 | 公費1-3対象日数・回数 | - | 公費情報から判定 | ✅ 実装済み | 簡易実装として空欄を出力（公費が存在する場合の計算は未実装） |
| 14 | サービス単位数 | ○ | 単位数 × 回数 | ✅ 実装済み | 計算値。訪問記録と加算の両方で計算 |
| 15-17 | 公費1-3対象サービス単位数 | - | 公費情報から計算 | ✅ 実装済み | 簡易実装として空欄を出力（公費が存在する場合の計算は未実装） |
| 18 | 摘要 | - | ❌ データなし | ✅ 実装済み | 空欄を出力（訪問看護では通常不要だが、仕様上は任意） |

**必須項目の出力可否**: ✅ すべて可能

---

## 5. 7131集計情報レコード（10）- 全38項目

| 項番 | 項目名 | 必須 | データソース | 出力可否 | 備考 |
|------|--------|------|------------|---------|------|
| 1 | 交換情報識別番号 | ○ | 要介護状態区分から自動判定 | ✅ 実装済み | 要介護1〜5→「7131」、要支援1・2→「7132」。介護度未設定時はデフォルト「7131」 |
| 2 | レコード種別コード | ○ | 固定値「10」 | ✅ 可能 | - |
| 3 | サービス提供年月 | ○ | リクエストパラメータ | ✅ 可能 | - |
| 4 | 事業所番号 | ○ | 施設管理画面「指定事業所番号（介護保険）」 | ✅ 実装済み | 10桁の指定事業所番号。「指定事業所番号（介護保険）」を優先使用、未設定時は「施設コード」から生成（後方互換性） |
| 5 | 証記載保険者番号 | ○ | 保険証情報「保険者番号」 | ✅ 可能 | 8桁。データ取得時に8桁にパディングする処理を実装済み |
| 6 | 被保険者番号 | ○ | 保険証情報「被保険者番号」 | ✅ 可能 | 10桁。データ取得時に10桁にパディングする処理を実装済み |
| 7 | サービス種類コード | ○ | 訪問記録「サービスコード」から抽出（先頭2桁） | ✅ 実装済み | 13=訪問看護, 16=介護予防訪問看護。サービス種類コードごとにグループ化して出力 |
| 8 | サービス実日数 | - | 訪問記録から計算 | ✅ 実装済み | 訪問看護では訪問回数と同一。サービス種類コードごとに訪問記録と加算の訪問回数を集計 |
| 9 | 計画単位数 | - | ❌ データなし | ✅ 実装済み | 空欄を出力（居宅サービス計画作成画面に該当項目なし。訪問看護では通常不要） |
| 10 | 限度額管理対象単位数 | - | ❌ データなし | ✅ 実装済み | 空欄を出力（入力画面に該当項目なし。訪問看護では通常不要） |
| 11 | 限度額管理対象外単位数 | - | ❌ データなし | ✅ 実装済み | 空欄を出力（入力画面に該当項目なし。訪問看護では通常不要） |
| 12-13 | 短期入所計画日数・実日数 | - | 固定値「0」 | ✅ 実装済み | 訪問看護では不要 |
| 14 | 保険 単位数合計 | ○ | 明細情報レコードから集計 | ✅ 実装済み | サービス種類コードごとに訪問記録と加算の単位数を集計 |
| 15 | 保険 単位数単価 | ○ | 固定値「1000」（1単位=10円） | ✅ 実装済み | 介護保険の単位数単価 |
| 16 | 保険 請求額 | ○ | 単位数合計 × 単位数単価 × 給付率 | ✅ 実装済み | 計算値。単位数合計 × 10円 × 給付率 |
| 17 | 保険 利用者負担額 | ○ | 単位数合計 × 単位数単価 × 負担率 | ✅ 実装済み | 計算値。単位数合計 × 10円 × 負担率 |
| 18-26 | 公費1-3の各種合計 | - | 公費情報から計算 | ✅ 実装済み | 簡易実装として「0」を出力（公費が存在する場合の計算は未実装） |
| 27-38 | 出来高医療費関連 | - | 固定値「0」 | ✅ 実装済み | 訪問看護では不要 |

**必須項目の出力可否**: 
- ✅ 出力可能: 14項目
- ⚠️ 要確認: 3項目（公費関連）
- ❌ 出力不可: 3項目（計画単位数、限度額管理対象単位数、限度額管理対象外単位数）

---

## 6. エンドレコード（種別:3）

| 項番 | 項目名 | 必須 | データソース | 出力可否 | 備考 |
|------|--------|------|------------|---------|------|
| 1 | レコード種別 | ○ | 固定値「3」 | ✅ 可能 | - |
| 2 | レコード番号 | ○ | 計算値（最終番号） | ✅ 可能 | - |
| 3 | ブランク | ○ | 改行（CR+LF） | ✅ 可能 | - |

**必須項目の出力可否**: ✅ すべて可能

---

## まとめ

### 必須項目の出力可否サマリー

| レコードタイプ | 必須項目数 | 出力可能 | 実装状況 | 備考 |
|--------------|----------|---------|---------|------|
| コントロールレコード | 13 | 13 | ✅ 実装済み | - |
| 7111 | 12 | 12 | ✅ 実装済み | 法別番号ごとに複数レコード出力 |
| 7131基本情報（01） | 約20項目 | 約20項目 | ✅ 実装済み | 交換情報識別番号は要介護状態区分で自動判定（7131/7132） |
| 7131明細情報（02） | 14 | 14 | ✅ 実装済み | 訪問記録と加算の両方を出力。交換情報識別番号は要介護状態区分で自動判定 |
| 7131集計情報（10） | 7 | 7 | ✅ 実装済み | サービス種類ごとに出力。交換情報識別番号は要介護状態区分で自動判定 |
| エンドレコード | 3 | 3 | ✅ 実装済み | - |

### 主な実装状況

1. **事業所番号（10桁）**: ✅ **恒久対応済み**: 施設管理画面に「指定事業所番号（介護保険）」（10桁）の入力欄を追加。指定事業所番号を優先使用し、未設定時は既存の「施設コード」から生成するフォールバック処理を実装。すべてのレコード（コントロール、7111、7131基本情報、7131明細情報、7131集計情報）で恒久対応完了
2. **7111レコードの法別番号**: ✅ **実装済み**: 法別番号ごとに複数の7111レコードを出力するように実装済み。患者を法別番号ごとにグループ化し（公費がない場合は法別番号「0」）、各法別番号ごとに7111レコードを生成している
3. **交換情報識別番号（7131/7132）**: ✅ **実装済み**: 要介護状態区分に応じて自動判定。要介護1〜5→「7131」、要支援1・2→「7132」。介護度未設定時はデフォルト「7131」。7131基本情報、明細情報、集計情報のすべてのレコードで適用
4. **居宅介護支援事業所番号**: ✅ **実装済み**: 居宅サービス計画作成画面に「居宅介護支援事業所番号」入力欄を追加。10桁英数字で入力可能。作成区分が「1」（居宅介護支援事業所作成）または「3」（介護予防支援事業所・地域包括支援センター作成）のときは必須、「2」（自己作成）のときは入力不要（空欄）。CSV出力時に作成区分に応じたバリデーションを実施し、未入力の場合はエラーメッセージを表示。作成区分が「1」または「3」で事業所番号が未入力の場合は自動的に「2」に変更する処理を実装
5. **公費給付率**: ✅ **実装済み**: 公費カード登録画面に「給付率」入力欄を追加。任意入力で0-100の範囲で入力可能。CSV出力時に給付率を3桁でパディングして出力（未入力の場合は「0」）
6. **計画単位数・限度額管理単位数**: ✅ **実装済み**: 空欄を出力（入力画面に該当項目なし。訪問看護では通常不要だが、仕様上は任意項目）
7. **明細情報レコード**: ✅ **実装済み**: 訪問記録と加算の両方を明細情報レコードとして出力。サービス項目コードごとにグループ化して集計
8. **集計情報レコード**: ✅ **実装済み**: サービス種類コードごとにグループ化して集計情報レコードを出力。訪問記録と加算の両方を集計対象に含める

### 実装完了項目

1. **事業所番号**: ✅ **恒久対応済み**: 施設管理画面に「指定事業所番号（介護保険）」（10桁）の入力欄を追加し、指定事業所番号を優先使用。未設定時は「施設コード」から生成するフォールバック処理を実装。すべてのレコードで恒久対応完了
2. **7111レコードの法別番号**: ✅ **実装済み**: 法別番号ごとに複数の7111レコードを出力するように実装済み。法別番号「0」（介護保険のみ）と各公費の法別番号ごとにグループ化し、それぞれの7111レコードを出力している
3. **交換情報識別番号（7131/7132）**: ✅ **実装済み**: 要介護状態区分に応じて自動判定。要介護1〜5→「7131」、要支援1・2→「7132」。7131基本情報、明細情報、集計情報のすべてのレコードで適用
4. **居宅介護支援事業所番号**: ✅ **実装済み**: 居宅サービス計画作成画面に「居宅介護支援事業所番号」入力欄を追加。10桁英数字で入力可能。作成区分が「1」または「3」のときは必須、「2」のときは空欄。CSV出力時に作成区分に応じたバリデーションを実施。作成区分が「1」または「3」で事業所番号が未入力の場合は自動的に「2」に変更する処理を実装
5. **公費給付率**: ✅ **実装済み**: 公費カード登録画面に「給付率」入力欄を追加。任意入力で0-100の範囲で入力可能。CSV出力時に給付率を3桁でパディングして出力（未入力の場合は「0」）
6. **計画単位数・限度額管理単位数**: ✅ **実装済み**: 空欄を出力（訪問看護では不要だが、仕様上は任意項目）
7. **明細情報レコード**: ✅ **実装済み**: 訪問記録と加算の両方を明細情報レコードとして出力。サービス項目コードごとにグループ化して集計
8. **集計情報レコード**: ✅ **実装済み**: サービス種類コードごとにグループ化して集計情報レコードを出力。訪問記録と加算の両方を集計対象に含める

### 結論

**必須項目はすべて出力可能**です。実装が完了し、すべての必須項目が適切に出力されています。

**主な実装完了項目**:
1. **事業所番号**: 恒久対応が完了し、施設管理画面に「指定事業所番号（介護保険）」（10桁）の入力欄を追加。指定事業所番号を優先使用し、未設定時は既存の「施設コード」から生成するフォールバック処理により後方互換性を確保。すべてのレコード（コントロール、7111、7131基本情報、7131明細情報、7131集計情報）で恒久対応済み。

2. **交換情報識別番号（7131/7132）**: 要介護状態区分に応じて自動判定する実装が完了。要介護1〜5→「7131」、要支援1・2→「7132」。7131基本情報、明細情報、集計情報のすべてのレコードで適用。

3. **7111レコードの法別番号**: 法別番号ごとに複数の7111レコードを出力する実装が完了。患者を法別番号ごとにグループ化し（公費がない場合は法別番号「0」）、各法別番号ごとに7111レコードを生成。

4. **居宅サービス計画作成情報**: 実装が完了し、居宅サービス計画作成画面に「居宅サービス計画作成区分」選択欄と「居宅介護支援事業所番号」入力欄を追加。作成区分を選択し、条件に応じて事業所番号を入力可能。CSV出力時に作成区分に応じた適切な処理とバリデーションを実施。作成区分が「1」または「3」で事業所番号が未入力の場合は自動的に「2」に変更する処理を実装。

5. **公費給付率**: 公費カード登録画面に「給付率」入力欄を追加。任意入力で0-100の範囲で入力可能。CSV出力時に給付率を3桁でパディングして出力（未入力の場合は「0」）。

6. **明細情報レコード**: 訪問記録と加算の両方を明細情報レコードとして出力。サービス項目コードごとにグループ化して集計。

7. **集計情報レコード**: サービス種類コードごとにグループ化して集計情報レコードを出力。訪問記録と加算の両方を集計対象に含める。

**任意項目について**: 計画単位数、限度額管理対象単位数、限度額管理対象外単位数、公費関連の詳細計算など、訪問看護では不要な項目については空欄または「0」を出力する簡易実装を完了。必要に応じて将来的に詳細な計算ロジックを追加可能。
