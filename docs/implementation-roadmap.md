# 訪問看護アプリ必須機能 実装ロードマップ

> **作成日**: 2025-10-04
> **最終更新**: 2025-10-05
> **目的**: 訪問看護アプリとして実運用可能な状態にするための必須機能実装計画

---

## 📊 現状分析サマリー

### 実装状況（2025-10-05更新）
- **基本業務フロー**: ✅ 95%以上 実装完了（患者管理、スケジュール、訪問記録、検索機能）
- **法令遵守・保険請求機能**: ✅ 100% 実装完了
- **総合評価**: ✅ **実運用可能** - Phase 1〜3の全必須機能実装完了

### 実装済みの主要機能 ✅

#### 基本機能
1. 患者基本情報管理（氏名、連絡先、既往歴、介護度、保険種別）
2. 訪問スケジュール管理（予定登録、担当割当、ステータス管理、検索機能）
3. 訪問記録作成（バイタルサイン、観察事項、実施ケア、添付ファイル、写真撮影）
4. 訪問記録の下書き・完成・承認フロー
5. バイタルサイン推移グラフ
6. スタッフ管理・権限管理
7. マルチテナント対応（施設・企業階層）
8. 建物管理機能（同一建物減算対応）

#### Phase 1: 法令遵守・保険請求機能 ✅（2025-10-05完了）
- 訪問看護指示書管理（有効期限アラート付き）
- 保険証情報管理（医療保険・介護保険）
- 医師・ケアマネージャー情報管理
- 基本的な加算計算ロジック（複数回訪問、長時間訪問、緊急訪問、同一建物減算）

#### Phase 2: レセプト基盤構築 ✅（2025-10-05完了）
- 月次訪問実績集計機能
- レセプト基本データ出力（CSV）
- 訪問看護計画書管理・PDF出力（日本語対応）
- 訪問看護報告書管理・PDF出力（日本語対応）

#### Phase 3: 業務効率化 ✅（2025-10-05完了）
- 契約書・同意書管理（PDF保管、立会人記録）
- スケジュールと訪問記録の完全紐付け（訪問日連動、自動選択）
- 繰り返しスケジュール自動生成（週次・隔週・月次パターン）

#### 追加実装機能
- 患者名・看護師名による検索機能（訪問記録、スケジュール管理）
- 訪問日に連動したスケジュール取得
- スケジュールが1件のみの場合の自動選択
- 週表示でのスケジュールステータス表示

---

## ✅ Phase 1-3 実装完了済み（2025-10-05）

すべての必須機能が実装完了しました。以下はアーカイブとして参照用に残します。

<details>
<summary>📋 実装完了した機能一覧（クリックで展開）</summary>

### Phase 1: 法令遵守・保険請求機能 ✅
1. ✅ 訪問看護指示書管理機能
2. ✅ 保険証情報管理（医療保険・介護保険）
3. ✅ レセプト作成機能（基本版）
4. ✅ 訪問看護計画書・報告書管理機能
5. ✅ 医師・ケアマネージャー情報管理
6. ✅ 同意書・契約書管理機能

### Phase 2: レセプト基盤構築 ✅
1. ✅ 月次訪問実績集計API
2. ✅ レセプトデータCSV出力
3. ✅ 訪問看護計画書・報告書PDF出力（日本語対応）

### Phase 3: 業務効率化 ✅
1. ✅ 訪問予定と訪問実績の完全な紐付け
2. ✅ 繰り返しスケジュール自動生成（週次・隔週・月次）
3. ✅ 契約書・同意書管理の完成

### 追加実装機能 ✅
1. ✅ 加算管理の強化（複数回訪問、長時間訪問、緊急訪問、同一建物減算）
2. ✅ 建物管理機能
3. ✅ 添付ファイル・写真撮影機能
4. ✅ 検索機能（患者名・看護師名）
5. ✅ 訪問日連動スケジュール取得
6. ✅ スケジュールステータス表示

</details>

---

## 🎯 実装フェーズ計画（完了）

### **Phase 1: 法令遵守・保険請求の最低限実装** ✅ 完了（2025-10-05）
~~**期間**: 2-3週間~~
**目標**: ✅ 実運用開始可能な状態 - 達成

**実装項目**:
1. ✅ 訪問看護指示書管理
2. ✅ 保険証情報管理
3. ✅ 医師・ケアマネージャー情報管理
4. ✅ 基本的な加算計算ロジック

**データベーススキーマ変更**:
- ✅ `doctor_orders`テーブル新設（訪問看護指示書）
- ✅ `insurance_cards`テーブル新設（保険証情報）
- ✅ `medical_institutions`テーブル新設（医療機関マスタ）
- ✅ `care_managers`テーブル新設（ケアマネージャーマスタ）
- ✅ `patients`テーブル拡張（doctorId, careManagerId追加）

---

### **Phase 2: レセプト基盤構築** ✅ 完了（2025-10-05）
~~**期間**: 2-3週間~~
**目標**: ✅ 月次請求業務を半自動化 - 達成

**実装項目**:
1. ✅ 月次訪問実績集計機能
2. ✅ レセプト基本データ出力（CSV）
3. ✅ 訪問看護計画書・報告書（PDF出力付き）

**データベーススキーマ変更**:
- ✅ `care_plans`テーブル新設（訪問看護計画書）
- ✅ `care_reports`テーブル新設（訪問看護報告書）
- ✅ `nursingRecords`テーブル拡張（加算計算結果フィールド追加）

---

### **Phase 3: 業務効率化** ✅ 完了（2025-10-05）
~~**期間**: 1-2週間~~
**目標**: ✅ 日常業務のストレス軽減 - 達成

**実装項目**:
1. ✅ 契約書・同意書管理（PDF保管、立会人記録）
2. ✅ スケジュールと記録の完全紐付け（訪問日連動、自動選択）
3. ✅ 繰り返しスケジュール自動生成（週次・隔週・月次）

**データベーススキーマ変更**:
- ✅ `contracts`テーブル新設（契約書・同意書）
- ✅ `nursingRecords`テーブル拡張（scheduleId、visitDate追加）
- ✅ `buildings`テーブル新設（建物管理）

---

## 📋 データベーススキーマ変更サマリー（実装完了）

### 新規テーブル（8つ）✅
1. ✅ `doctor_orders` - 訪問看護指示書
2. ✅ `insurance_cards` - 保険証情報
3. ✅ `medical_institutions` - 医療機関マスタ
4. ✅ `care_managers` - ケアマネージャーマスタ
5. ✅ `care_plans` - 訪問看護計画書
6. ✅ `care_reports` - 訪問看護報告書
7. ✅ `contracts` - 契約書・同意書
8. ✅ `buildings` - 建物管理（同一建物減算対応）

### 既存テーブル拡張 ✅
- ✅ `patients`:
  - `doctorId` (varchar, FK to medical_institutions)
  - `careManagerId` (varchar, FK to care_managers)
  - `buildingId` (varchar, FK to buildings)
- ✅ `nursingRecords`:
  - `scheduleId` (varchar, FK to schedules)
  - `visitDate` (date, 訪問日)
  - `calculatedPoints` (integer, 算定点数)
  - `appliedBonuses` (json, 適用加算の詳細)
  - `hasAdditionalPaymentAlert` (boolean, 加算未入力アラート)

---

## ⏱️ 実装期間の見積もり（完了）

| フェーズ | 予定期間 | 実績 | ステータス |
|---------|------|------|----------|
| Phase 1 | 2-3週間 | 完了 | ✅ |
| Phase 2 | 2-3週間 | 完了 | ✅ |
| Phase 3 | 1-2週間 | 完了 | ✅ |

~~**合計**: 5-8週間で実用最小限の訪問看護アプリが完成~~
**実績**: ✅ **Phase 1-3 すべて完了（2025-10-05）**

---

## 🚀 到達状態（2025-10-05）

### ✅ すべてのフェーズ完了

#### Phase 1完了（法令遵守・保険請求基盤）
- ✅ 法令遵守: 指示書管理で適法運用可能
- ✅ 多職種連携: 医師・ケアマネ情報で情報共有可能
- ✅ 基本加算: 主要な加算の自動判定・計算
- ✅ 保険証管理: レセプト請求の基盤完成

#### Phase 2完了（レセプト基盤構築）
- ✅ 保険請求: 月次集計→CSV出力で請求業務を大幅効率化
- ✅ 計画書・報告書: 介護保険請求の要件を満たす（PDF出力対応）
- ✅ レセプト基盤: 外部レセプトソフトへの連携準備完了
- ✅ 加算計算: 複数回訪問、長時間訪問、緊急訪問、同一建物減算の自動判定

#### Phase 3完了（業務効率化）
- ✅ 業務フロー: スケジュール→訪問→記録→報告の完全サイクル
- ✅ 契約管理: コンプライアンス対応（契約書・同意書管理）
- ✅ 効率化: 繰り返しスケジュール自動生成
- ✅ 検索機能: 患者名・看護師名による高速検索
- ✅ 紐付け: スケジュールと訪問記録の完全連携

---

## 🎯 今後の拡張可能性

Phase 1-3の基盤が完成したことで、以下の付加価値機能の実装が可能になりました：

### 短期的な拡張候補
1. **データ分析・可視化**
   - 患者別の訪問頻度分析
   - 加算取得率の可視化
   - 看護師の稼働状況分析

2. **通知機能の強化**
   - 指示書期限切れの事前通知（メール・アプリ通知）
   - スケジュール変更の関係者への自動通知
   - 未完了記録のリマインダー

3. **モバイル対応**
   - 訪問先でのスマートフォン入力対応
   - オフライン対応（訪問先で記録→帰社後同期）

### 中長期的な拡張候補
1. **AI支援機能**
   - 訪問記録の音声入力・自動文字起こし
   - 加算漏れの自動検知
   - 訪問スケジュールの最適化提案

2. **外部連携**
   - 電子カルテとの連携
   - レセプトソフトとの直接連携（API）
   - ケアマネ事業所との情報共有システム

3. **セキュリティ強化**
   - 二段階認証
   - 監査ログの詳細記録
   - アクセス権限の細分化

---

## 📌 運用上の注意事項

### 実運用開始前のチェックリスト
- [ ] 実際の患者データでの動作確認
- [ ] スタッフへの操作トレーニング実施
- [ ] バックアップ体制の確立
- [ ] 障害時の対応手順の整備
- [ ] 個人情報保護方針の確認

### 継続的な改善
- ユーザーフィードバックの収集と反映
- 法令改正への対応（診療報酬改定等）
- 定期的なセキュリティアップデート

---

**最終更新**: 2025-10-05
**ステータス**: ✅ **Phase 1-3 完了 - 実運用可能**
