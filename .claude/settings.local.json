{
  "permissions": {
    "allow": [
      "Bash(then psql $DATABASE_URL -c \"\n-- care_initial_visit_1の条件を確認\nSELECT \n  bonus_code,\n  bonus_name,\n  predefined_conditions\nFROM bonus_master\nWHERE bonus_code = ''care_initial_visit_1'';\n\")",
      "Bash(then psql $DATABASE_URL -c \"\n-- care_initial_visit_1とcare_initial_visit_2の詳細を確認\nSELECT \n  bonus_code,\n  bonus_name,\n  fixed_points,\n  can_combine_with,\n  cannot_combine_with,\n  is_active,\n  display_order\nFROM bonus_master\nWHERE bonus_code IN (''care_initial_visit_1'', ''care_initial_visit_2'')\nORDER BY bonus_code;\n\")",
      "Bash(then psql $DATABASE_URL -c \"\n-- テスト2の訪問記録で実際にどの加算が評価されたか確認\nSELECT \n  bch.id,\n  bm.bonus_code,\n  bm.bonus_name,\n  bch.calculated_points,\n  bch.calculation_details\nFROM bonus_calculation_history bch\nJOIN bonus_master bm ON bch.bonus_master_id = bm.id\nWHERE bch.nursing_record_id = ''6f9cc678-7220-4656-9502-93886e20c9a2''\nORDER BY bch.created_at;\n\")",
      "Bash(then psql $DATABASE_URL -c \"\n-- care_initial_visit_1の条件を再確認\nSELECT \n  bonus_code,\n  bonus_name,\n  predefined_conditions,\n  is_active\nFROM bonus_master\nWHERE bonus_code = ''care_initial_visit_1'';\n\")",
      "Bash(then psql $DATABASE_URL -c \"\n-- テスト3の訪問記録を確認\nSELECT \n  id,\n  visit_date,\n  actual_start_time,\n  actual_end_time,\n  EXTRACT(EPOCH FROM (actual_end_time - actual_start_time))/60 as duration_minutes,\n  is_first_visit_of_plan,\n  calculated_points,\n  applied_bonuses::jsonb->0->>''bonusName'' as bonus1,\n  applied_bonuses::jsonb->1->>''bonusName'' as bonus2\nFROM nursing_records\nWHERE id = ''7cecddf0-d18f-4d79-bcb1-fba5df12fb26'';\n\")",
      "Bash(then psql $DATABASE_URL -c \"\n-- care_initial_visit_2とcare_long_visitを相互に併算定可能にする\nUPDATE bonus_master\nSET can_combine_with = array_append(can_combine_with, ''care_long_visit'')\nWHERE bonus_code = ''care_initial_visit_2'';\n\nUPDATE bonus_master\nSET can_combine_with = array_append(can_combine_with, ''care_initial_visit_2'')\nWHERE bonus_code = ''care_long_visit'';\n\n-- 確認\nSELECT \n  bonus_code,\n  bonus_name,\n  can_combine_with,\n  cannot_combine_with\nFROM bonus_master\nWHERE bonus_code IN (''care_initial_visit_2'', ''care_long_visit'')\nORDER BY bonus_code;\n\")",
      "Bash(then psql $DATABASE_URL -c \"\nSELECT \n  bonus_code,\n  bonus_name,\n  insurance_type,\n  predefined_conditions,\n  is_active\nFROM bonus_master\nWHERE is_active = true\n  AND predefined_conditions IS NOT NULL\nORDER BY insurance_type, display_order\nLIMIT 10;\n\")",
      "Bash(then psql $DATABASE_URL -c \"SELECT bonus_code, bonus_name, insurance_type, predefined_conditions, is_active FROM bonus_master WHERE is_active = true AND predefined_conditions IS NOT NULL ORDER BY insurance_type, display_order LIMIT 10;\")",
      "Bash(then psql $DATABASE_URL -c \"SELECT bonus_code, bonus_name, insurance_type, predefined_conditions FROM bonus_master WHERE bonus_code IN (''medical_discharge_joint_guidance'', ''care_initial_visit_1'', ''care_initial_visit_2'', ''care_long_visit'', ''care_emergency_system'', ''care_emergency_system_2'') AND is_active = true ORDER BY bonus_code;\")",
      "Bash(awk:*)",
      "Bash(sort:*)",
      "Bash(tree:*)"
    ],
    "deny": [],
    "ask": []
  }
}
